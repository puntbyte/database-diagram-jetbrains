<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <link rel="icon" type="image/svg+xml" href="./vite.svg"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>web</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();class an{onMessage;constructor(e){this.onMessage=e,window.addEventListener("message",t=>{const n=t.data;n&&typeof n.type=="string"&&this.onMessage(n)}),this.send({type:"READY"})}send(e){const t=JSON.stringify(e);window.cefQuery?window.cefQuery({request:t}):console.log("Bridge Dev Log:",e)}log(e){this.send({type:"LOG",level:"INFO",message:e})}}class on{parse(e){const t=[],n=[],a=e.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,""),i=new Map,l=/Enum\s+(\w+)\s*\{([^}]+)\}/gi;let g;for(;(g=l.exec(a))!==null;){const O=g[1],N=g[2],f=[],u=N.split(`
`);for(let x of u){if(x=x.trim(),!x)continue;const A=/^(['"]?[\w]+['"]?)/.exec(x);A&&f.push(A[1].replace(/['"]/g,""))}i.set(O,f)}const s=/Table\s+("?[\w.]+"?)\s*(?:\[(.*?)\])?\s*(?:as\s+\w+\s*)?\{([^}]+)\}/gi;let y;for(;(y=s.exec(a))!==null;){const O=y[1],N=y[2],f=y[3],u=O.replace(/"/g,""),x=this.parseSettings(N||""),{fields:A,inlineRels:k,note:L}=this.parseFieldsAndNote(u,f,i);t.push({id:this.sanitizeId(u),name:u,fields:A,note:L,color:x.get("color"),width:x.has("width")?parseInt(x.get("width"),10):void 0,x:x.has("x")?parseInt(x.get("x"),10):void 0,y:x.has("y")?parseInt(x.get("y"),10):void 0}),n.push(...k)}const d=/("?[\w.]+"?)\.("?[\w"]+"?)\s*([<>=-])\s*("?[\w.]+"?)\.("?[\w"]+"?)/g,m=/Ref\s*[^{:]*[:\{]\s*([^}]+)\s*\}?/gi;let M;for(;(M=m.exec(a))!==null;){const O=M[1];let N;for(;(N=d.exec(O))!==null;)n.push(this.createRelationship(N[1],N[2],N[3],N[4],N[5]))}return{tables:t,relationships:n}}parseSettings(e){const t=new Map;if(!e)return t;const n=e.split(",").map(a=>a.trim());for(let a of n)if(a.includes(":")){const[i,l]=a.split(":").map(g=>g.trim());t.set(i.toLowerCase(),l)}else t.set(a.toLowerCase(),"true");return t}parseFieldsAndNote(e,t,n){const a=[],i=[],l=t.split(`
`);let g;for(let s of l){if(s=s.trim(),!s)continue;if(s.startsWith("Note:")){g=this.parseNote(s);continue}const d=/^("?[\w]+"?)\s+([a-zA-Z0-9_()]+)(?:\s*\[(.*?)\])?/.exec(s);if(d){const m=d[1].replace(/"/g,"");let M=d[2];const N=(d[3]||"").split(",").map(R=>R.trim());let f=!1,u=!1,x=!1,A,k,L,T=null;for(let R of N){/pk|primary key/i.test(R)&&(f=!0),/unique/i.test(R)&&(u=!0),/not null/i.test(R)&&(x=!0);const b=/note:\s*(['"])([\s\S]*?)\1/i.exec(R);if(b){A=b[2];continue}const p=/default:\s*(['`])?([\s\S]*?)\1?/i.exec(R);if(p){k=p[2];continue}if(T=/ref:\s*([<>=-])\s*("?[\w.]+"?)\.("?[\w"]+"?)/i.exec(R),T){const E=T[1],S=T[2].replace(/"/g,""),B=T[3].replace(/"/g,"");i.push(this.createRelationship(e,m,E,S,B))}}n.has(M)&&(L=n.get(M)),a.push({name:m,type:M,isPk:f,isUnique:u,isNotNull:x,isFk:!!T,note:A,default:k,enumValues:L})}}return{fields:a,inlineRels:i,note:g}}parseNote(e){const n=/Note:\s*(['"])([\s\S]*?)\1/i.exec(e);return n?n[2]:""}createRelationship(e,t,n,a,i){const l=s=>s.replace(/"/g,"");e=l(e),t=l(t),a=l(a),i=l(i);let g="1:n";return n==="<"?g="1:n":n===">"?g="n:1":n==="-"?g="1:1":n==="<>"&&(g="m:n"),{fromTable:this.sanitizeId(e),fromColumn:t,toTable:this.sanitizeId(a),toColumn:i,type:g}}sanitizeId(e){return e.replace(/[^a-zA-Z0-9_]/g,"_")}}const Ct={Key:`
    <svg viewBox="0 0 24 24" width="100%" height="100%" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>
    </svg>`,Table:`
    <svg viewBox="0 0 24 24" width="100%" height="100%" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
        <line x1="3" y1="9" x2="21" y2="9"></line>
        <line x1="9" y1="21" x2="9" y2="9"></line>
    </svg>`};class sn{static create(e,t){const n=document.createElement("div");n.className="db-row",n.id=`col-${t}-${e.name}`,e.isUnique&&n.classList.add("indexed-row");const a=document.createElement("div");a.className="row-left";const i=document.createElement("span");i.className="key-icon",e.isPk||e.isFk?(i.innerHTML=Ct.Key,e.isPk&&e.isFk?(i.classList.add("pk-fk"),i.title="Primary & Foreign Key"):e.isPk?(i.classList.add("pk"),i.title="Primary Key"):(i.classList.add("fk"),i.title="Foreign Key")):i.classList.add("empty"),a.appendChild(i);const l=document.createElement("div");l.className="name-container";const g=document.createElement("span");if(g.className="field-name",g.innerText=e.name,l.appendChild(g),e.note){const m=document.createElement("div");m.className="field-note",m.innerText=e.note,l.appendChild(m)}a.appendChild(l);const s=document.createElement("div");s.className="row-right";const y=document.createElement("div");y.className="type-container";const d=document.createElement("span");if(d.className="field-type",e.isUnique&&d.classList.add("constrained-type"),d.innerText=e.type,y.appendChild(d),e.enumValues&&e.enumValues.length>0){const m=this.createBadge("ENUM","enum");m.title=`Enum values: ${e.enumValues.join(", ")}`,s.appendChild(m)}if(e.isUnique&&s.appendChild(this.createBadge("UQ","unique")),e.isNotNull&&s.appendChild(this.createBadge("NN","not-null")),e.default){const m=document.createElement("div");m.className="field-default",m.innerText=`default: ${e.default}`,y.appendChild(m)}return s.appendChild(y),n.appendChild(a),n.appendChild(s),n}static createBadge(e,t){const n=document.createElement("span");return n.className=`badge ${t}`,n.innerText=e,n}}class cn{static create(e){const t=document.createElement("div");t.className="db-table",t.id=`table-${e.id}`,e.width&&(t.style.width=`${e.width}px`);const n=document.createElement("div");n.className="db-table-header",e.color&&(n.style.backgroundColor=e.color);const[a,i]=e.name.includes(".")?e.name.split("."):["",e.name],l=document.createElement("div");l.className="header-title-wrapper";const g=document.createElement("span");g.className="table-icon",g.innerHTML=Ct.Table,l.appendChild(g);const s=document.createElement("span");s.className="title",s.innerText=i,l.appendChild(s),n.appendChild(l);const y=document.createElement("span");if(y.className="schema-banner",y.innerText=a||"public",n.appendChild(y),e.note){const m=document.createElement("div");m.className="table-note",m.innerText=e.note,n.appendChild(m)}t.appendChild(n),e.fields.forEach(m=>{t.appendChild(sn.create(m,e.id))});const d=document.createElement("div");return d.className="resize-handle",d.title="Drag to resize",t.appendChild(d),t}}class ln{static MIN_STRAIGHT=15;static MAX_STRAIGHT=40;static LABEL_OFFSET=25;static calculatePath(e,t,n,a,i,l,g="Curve"){const s=e.y+e.height/2,y=t.y+t.height/2,d={x:e.x+e.width,y:s},m={x:e.x,y:s},M={x:t.x+t.width,y},O={x:t.x,y},N=e.x<t.x+t.width&&e.x+e.width>t.x;let f,u,x,A;N?(f=d,u=M,x=1,A=1):e.x<t.x?(f=d,u=O,x=1,A=-1):(f=m,u=M,x=-1,A=1);const k=Math.abs(u.x-f.x),L=Math.max(this.MIN_STRAIGHT,Math.min(this.MAX_STRAIGHT,k/3)),T={x:f.x+L*x,y:f.y},R={x:u.x+L*A,y:u.y};if(N){const S=Math.max(40,Math.abs(u.y-f.y)*.4);T.x=Math.max(f.x,u.x)+S,R.x=T.x}let b="";switch(g){case"Rectilinear":case"RoundRectilinear":{const S=(T.x+R.x)/2,B={x:S,y:f.y},$={x:S,y:u.y};if(g==="Rectilinear")b=`M ${f.x} ${f.y} L ${B.x} ${B.y} L ${$.x} ${$.y} L ${u.x} ${u.y}`;else{const v=Math.min(15,Math.abs($.y-B.y)/2,Math.abs(B.x-f.x)/2),j=u.y>f.y?1:-1,K=B.x>f.x?1:-1,U=u.x>$.x?1:-1;b=`M ${f.x} ${f.y} 
               L ${B.x-v*K} ${B.y} 
               Q ${B.x} ${B.y} ${B.x} ${B.y+v*j} 
               L ${$.x} ${$.y-v*j} 
               Q ${$.x} ${$.y} ${$.x+v*U} ${$.y} 
               L ${u.x} ${u.y}`}break}case"Oblique":case"RoundOblique":{g==="Oblique"?b=`M ${f.x} ${f.y} L ${T.x} ${T.y} L ${R.x} ${R.y} L ${u.x} ${u.y}`:b=`M ${f.x} ${f.y} 
               L ${T.x} ${T.y} 
               Q ${(T.x+R.x)/2} ${(T.y+R.y)/2} ${R.x} ${R.y} 
               L ${u.x} ${u.y}`;break}default:{b=`M ${f.x} ${f.y} C ${T.x} ${T.y}, ${R.x} ${R.y}, ${u.x} ${u.y}`;break}}const p=this.getLabelPos(f,T),E=this.getLabelPos(u,R);return{d:b,start:f,end:u,labelStart:p,labelEnd:E,fromId:n,toId:a,fromTableId:i,toTableId:l}}static getLabelPos(e,t){const n=t.x-e.x,a=t.y-e.y,i=Math.sqrt(n*n+a*a),l=this.LABEL_OFFSET/(i||1);return{x:e.x+n*l,y:e.y+a*l}}}class un{static createGroup(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.classList.add("connection-group"),n.dataset.from=e.fromId,n.dataset.to=e.toId,n.dataset.fromTable=e.fromTableId,n.dataset.toTable=e.toTableId;const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d",e.d),a.classList.add("relation-hit-area"),n.appendChild(a);const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",e.d),i.classList.add("relation-line-base"),n.appendChild(i);const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",e.d),l.classList.add("relation-line-flow"),n.appendChild(l),this.createLabels(e,t).forEach(s=>n.appendChild(s)),n}static createLabels(e,t){const n=this.getLabelText(t);return n?[this.createLabelBadge(n.from,e.labelStart.x,e.labelStart.y),this.createLabelBadge(n.to,e.labelEnd.x,e.labelEnd.y)]:[]}static createLabelBadge(e,t,n){const a=document.createElementNS("http://www.w3.org/2000/svg","g");a.classList.add("relation-label-group");const i=document.createElementNS("http://www.w3.org/2000/svg","rect");i.setAttribute("x",(t-9).toString()),i.setAttribute("y",(n-7).toString()),i.setAttribute("width","18"),i.setAttribute("height","14"),i.setAttribute("rx","4"),i.classList.add("label-bg");const l=document.createElementNS("http://www.w3.org/2000/svg","text");return l.setAttribute("x",t.toString()),l.setAttribute("y",(n+1).toString()),l.classList.add("relation-label-text"),l.textContent=e,a.appendChild(i),a.appendChild(l),a}static getLabelText(e){switch(e){case"1:n":return{from:"1",to:"n"};case"n:1":return{from:"n",to:"1"};case"1:1":return{from:"1",to:"1"};case"m:n":return{from:"m",to:"n"};default:return null}}}class mt{static create(e){const t=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.setAttribute("cx",e.x.toString()),t.setAttribute("cy",e.y.toString()),t.setAttribute("r","3.5"),t.classList.add("anchor-port"),t}}class pt{svgLayer;scale=1;container;currentRelationships=[];currentLineStyle="Curve";constructor(e){this.container=e,this.svgLayer=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgLayer.classList.add("connection-layer"),e.appendChild(this.svgLayer),this.setupInteractions()}updateScale(e){this.scale=e}setLineStyle(e){this.currentLineStyle=e,this.draw(this.currentRelationships)}draw(e){this.currentRelationships=e,this.svgLayer.innerHTML="",e.forEach(t=>this.drawOne(t))}drawOne(e){const t=`col-${e.fromTable}-${e.fromColumn}`,n=`col-${e.toTable}-${e.toColumn}`,a=document.getElementById(t),i=document.getElementById(n);if(!a||!i)return;const l=this.getRelativeRect(a),g=this.getRelativeRect(i),s=ln.calculatePath(l,g,t,n,`table-${e.fromTable}`,`table-${e.toTable}`,this.currentLineStyle),y=un.createGroup(s,e.type);this.svgLayer.appendChild(y);const d=mt.create(s.start);d.dataset.anchorId=t,this.svgLayer.appendChild(d);const m=mt.create(s.end);m.dataset.anchorId=n,this.svgLayer.appendChild(m)}getRelativeRect(e){const t=e.getBoundingClientRect(),n=this.svgLayer.getBoundingClientRect();return{x:(t.left-n.left)/this.scale,y:(t.top-n.top)/this.scale,width:t.width/this.scale,height:t.height/this.scale}}setupInteractions(){this.container.addEventListener("mouseover",e=>this.handleHover(e,!0)),this.container.addEventListener("mouseout",e=>this.handleHover(e,!1))}handleHover(e,t){if(!t){this.clearHighlights();return}const n=e.target,a=n.closest(".connection-group");if(a){this.activateConnection(a);return}const i=n.closest(".db-row");if(i&&i.id){this.activateColumn(i.id);return}const l=n.closest(".db-table");if(l&&l.id){this.activateTable(l.id);return}}clearHighlights(){document.querySelectorAll(".highlighted").forEach(t=>t.classList.remove("highlighted"))}activateConnection(e){e.classList.add("highlighted");const t=e.dataset.from,n=e.dataset.to;t&&this.setHighlight(t),n&&this.setHighlight(n),this.highlightAnchorsForLine(t,n)}activateColumn(e){this.setHighlight(e),this.svgLayer.querySelectorAll(`[data-from="${e}"], [data-to="${e}"]`).forEach(n=>{n.classList.add("highlighted");const a=n;a.dataset.from!==e&&this.setHighlight(a.dataset.from),a.dataset.to!==e&&this.setHighlight(a.dataset.to),this.highlightAnchorsForLine(a.dataset.from,a.dataset.to)})}activateTable(e){this.setHighlight(e),this.svgLayer.querySelectorAll(`[data-from-table="${e}"], [data-to-table="${e}"]`).forEach(n=>{n.classList.add("highlighted");const a=n;this.setHighlight(a.dataset.from),this.setHighlight(a.dataset.to),this.highlightAnchorsForLine(a.dataset.from,a.dataset.to)})}setHighlight(e){if(!e)return;const t=document.getElementById(e);t&&t.classList.add("highlighted")}highlightAnchorsForLine(e,t){e&&this.svgLayer.querySelectorAll(`[data-anchor-id="${e}"]`).forEach(a=>a.classList.add("highlighted")),t&&this.svgLayer.querySelectorAll(`[data-anchor-id="${t}"]`).forEach(a=>a.classList.add("highlighted"))}}class dn{activeEl=null;mode="NONE";initialMouse={x:0,y:0};initialVal={x:0,y:0,width:0};scale=1;relationships=[];connectionManager;onUpdate;constructor(e,t,n){this.connectionManager=t,this.onUpdate=n,e.addEventListener("mousedown",a=>this.onMouseDown(a)),window.addEventListener("mousemove",a=>this.onMouseMove(a)),window.addEventListener("mouseup",()=>this.onMouseUp())}updateConnectionManager(e){this.connectionManager=e}setRelationships(e){this.relationships=e}updateScale(e){this.scale=e}onMouseDown(e){const t=e.target;if(t.classList.contains("resize-handle")){const a=t.closest(".db-table");a&&this.startResize(a,e);return}const n=t.closest(".db-table-header");if(n){const a=n.parentElement;a&&this.startDrag(a,e);return}}startDrag(e,t){this.mode="DRAG",this.activeEl=e,this.initialVal.x=e.offsetLeft,this.initialVal.y=e.offsetTop,this.initialMouse={x:t.clientX,y:t.clientY},t.stopPropagation(),t.preventDefault(),e.classList.add("dragging")}startResize(e,t){this.mode="RESIZE",this.activeEl=e,this.initialVal.width=e.offsetWidth,this.initialMouse={x:t.clientX,y:t.clientY},t.stopPropagation(),t.preventDefault(),e.classList.add("resizing"),document.body.style.cursor="col-resize"}onMouseMove(e){if(this.activeEl){if(this.mode==="DRAG"){const t=(e.clientX-this.initialMouse.x)/this.scale,n=(e.clientY-this.initialMouse.y)/this.scale;this.activeEl.style.left=`${this.initialVal.x+t}px`,this.activeEl.style.top=`${this.initialVal.y+n}px`,this.activeEl.style.transform="none",this.connectionManager.draw(this.relationships)}else if(this.mode==="RESIZE"){const t=(e.clientX-this.initialMouse.x)/this.scale,n=Math.max(200,this.initialVal.width+t);this.activeEl.style.width=`${n}px`,this.connectionManager.draw(this.relationships)}}}onMouseUp(){if(!this.activeEl)return;const e=this.activeEl,t=e.querySelector(".title"),n=t?t.textContent:e.id.replace("table-","");if(n){const a=Math.round(parseInt(e.style.left||"0",10)),i=Math.round(parseInt(e.style.top||"0",10)),l=Math.round(e.getBoundingClientRect().width/this.scale);this.onUpdate(n,a,i,l)}e.classList.remove("dragging"),e.classList.remove("resizing"),document.body.style.cursor="",this.activeEl=null,this.mode="NONE"}}function fn(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}var le={exports:{}},vt;function hn(){if(vt)return le.exports;vt=1,le.exports=w,le.exports.addWheelListener=w,le.exports.removeWheelListener=e;function w(t,n,a){t.addEventListener("wheel",n,a)}function e(t,n,a){t.removeEventListener("wheel",n,a)}return le.exports}var ue={exports:{}},Be,gt;function mn(){if(gt)return Be;gt=1;var w=4,e=.001,t=1e-7,n=10,a=11,i=1/(a-1),l=typeof Float32Array=="function";function g(f,u){return 1-3*u+3*f}function s(f,u){return 3*u-6*f}function y(f){return 3*f}function d(f,u,x){return((g(u,x)*f+s(u,x))*f+y(u))*f}function m(f,u,x){return 3*g(u,x)*f*f+2*s(u,x)*f+y(u)}function M(f,u,x,A,k){var L,T,R=0;do T=u+(x-u)/2,L=d(T,A,k)-f,L>0?x=T:u=T;while(Math.abs(L)>t&&++R<n);return T}function O(f,u,x,A){for(var k=0;k<w;++k){var L=m(u,x,A);if(L===0)return u;var T=d(u,x,A)-f;u-=T/L}return u}function N(f){return f}return Be=function(u,x,A,k){if(!(0<=u&&u<=1&&0<=A&&A<=1))throw new Error("bezier x values must be in [0, 1] range");if(u===x&&A===k)return N;for(var L=l?new Float32Array(a):new Array(a),T=0;T<a;++T)L[T]=d(T*i,u,A);function R(b){for(var p=0,E=1,S=a-1;E!==S&&L[E]<=b;++E)p+=i;--E;var B=(b-L[E])/(L[E+1]-L[E]),$=p+B*i,v=m($,u,A);return v>=e?O(b,$,u,A):v===0?$:M(b,p,p+i,u,A)}return function(p){return p===0?0:p===1?1:d(R(p),x,k)}},Be}var yt;function pn(){if(yt)return ue.exports;yt=1;var w=mn(),e={ease:w(.25,.1,.25,1),easeIn:w(.42,0,1,1),easeOut:w(0,0,.58,1),easeInOut:w(.42,0,.58,1),linear:w(0,0,1,1)};ue.exports=t,ue.exports.makeAggregateRaf=g,ue.exports.sharedScheduler=g();function t(s,y,d){var m=Object.create(null),M=Object.create(null);d=d||{};var O=typeof d.easing=="function"?d.easing:e[d.easing];O||(d.easing&&console.warn("Unknown easing function in amator: "+d.easing),O=e.ease);var N=typeof d.step=="function"?d.step:n,f=typeof d.done=="function"?d.done:n,u=a(d.scheduler),x=Object.keys(y);x.forEach(function(E){m[E]=s[E],M[E]=y[E]-s[E]});var A=typeof d.duration=="number"?d.duration:400,k=Math.max(1,A*.06),L,T=0;return L=u.next(b),{cancel:R};function R(){u.cancel(L),L=0}function b(){var E=O(T/k);T+=1,p(E),T<=k?(L=u.next(b),N(s)):(L=0,setTimeout(function(){f(s)},0))}function p(E){x.forEach(function(S){s[S]=M[S]*E+m[S]})}}function n(){}function a(s){if(!s){var y=typeof window<"u"&&window.requestAnimationFrame;return y?i():l()}if(typeof s.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof s.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return s}function i(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function l(){return{next:function(s){return setTimeout(s,1e3/60)},cancel:function(s){return clearTimeout(s)}}}function g(){var s=new Set,y=new Set,d=0;return{next:M,cancel:M,clearAll:m};function m(){s.clear(),y.clear(),cancelAnimationFrame(d),d=0}function M(f){y.add(f),O()}function O(){d||(d=requestAnimationFrame(N))}function N(){d=0;var f=y;y=s,s=f,s.forEach(function(u){u()}),s.clear()}}return ue.exports}var Oe,wt;function vn(){if(wt)return Oe;wt=1;function w(n){t(n);const a=e(n);return n.on=a.on,n.off=a.off,n.fire=a.fire,n}function e(n){let a=Object.create(null);return{on:function(i,l,g){if(typeof l!="function")throw new Error("callback is expected to be a function");let s=a[i];return s||(s=a[i]=[]),s.push({callback:l,ctx:g}),n},off:function(i,l){if(typeof i>"u")return a=Object.create(null),n;if(a[i])if(typeof l!="function")delete a[i];else{const g=a[i];for(let s=0;s<g.length;++s)g[s].callback===l&&g.splice(s,1)}return n},fire:function(i){const l=a[i];if(!l)return n;let g;arguments.length>1&&(g=Array.prototype.slice.call(arguments,1));for(let s=0;s<l.length;++s){const y=l[s];y.callback.apply(y.ctx,g)}return n}}}function t(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");const a=["on","fire","off"];for(let i=0;i<a.length;++i)if(n.hasOwnProperty(a[i]))throw new Error("Subject cannot be eventified, since it already has property '"+a[i]+"'")}return Oe=w,Oe}var Ie,xt;function gn(){if(xt)return Ie;xt=1,Ie=w;function w(n,a,i){typeof i!="object"&&(i={});var l=typeof i.minVelocity=="number"?i.minVelocity:5,g=typeof i.amplitude=="number"?i.amplitude:.25,s=typeof i.cancelAnimationFrame=="function"?i.cancelAnimationFrame:e(),y=typeof i.requestAnimationFrame=="function"?i.requestAnimationFrame:t(),d,m,M=342,O,N,f,u,x,A,k,L;return{start:R,stop:p,cancel:T};function T(){s(O),s(L)}function R(){d=n(),u=k=N=x=0,m=new Date,s(O),s(L),O=y(b)}function b(){var S=Date.now(),B=S-m;m=S;var $=n(),v=$.x-d.x,j=$.y-d.y;d=$;var K=1e3/(1+B);N=.8*v*K+.2*N,x=.8*j*K+.2*x,O=y(b)}function p(){s(O),s(L);var S=n();f=S.x,A=S.y,m=Date.now(),(N<-l||N>l)&&(u=g*N,f+=u),(x<-l||x>l)&&(k=g*x,A+=k),L=y(E)}function E(){var S=Date.now()-m,B=!1,$=0,v=0;u&&($=-u*Math.exp(-S/M),$>.5||$<-.5?B=!0:$=u=0),k&&(v=-k*Math.exp(-S/M),v>.5||v<-.5?B=!0:v=k=0),B&&(a(f+$,A+v),L=y(E))}}function e(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function t(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(n){return setTimeout(n,16)}}return Ie}var ze,bt;function yn(){if(bt)return ze;bt=1,ze=w;function w(n){if(n)return{capture:t,release:t};var a,i,l,g=!1;return{capture:s,release:y};function s(d){g=!0,i=window.document.onselectstart,l=window.document.ondragstart,window.document.onselectstart=e,a=d,a.ondragstart=e}function y(){g&&(g=!1,window.document.onselectstart=i,a&&(a.ondragstart=l))}}function e(n){return n.stopPropagation(),!1}function t(){}return ze}var De,Et;function wn(){if(Et)return De;Et=1,De=w;function w(){this.x=0,this.y=0,this.scale=1}return De}var we={exports:{}},St;function xn(){if(St)return we.exports;St=1,we.exports=w,we.exports.canAttach=e;function w(t,n){if(!e(t))throw new Error("svg element is required for svg.panzoom to work");var a=t.ownerSVGElement;if(!a)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||a.setAttribute("tabindex",0);var i={getBBox:g,getScreenCTM:s,getOwner:l,applyTransform:d,initTransform:y};return i;function l(){return a}function g(){var m=t.getBBox();return{left:m.x,top:m.y,width:m.width,height:m.height}}function s(){var m=a.getCTM();return m||a.getScreenCTM()}function y(m){var M=t.getCTM();M===null&&(M=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),m.x=M.e,m.y=M.f,m.scale=M.a,a.removeAttributeNS(null,"viewBox")}function d(m){t.setAttribute("transform","matrix("+m.scale+" 0 0 "+m.scale+" "+m.x+" "+m.y+")")}}function e(t){return t&&t.ownerSVGElement&&t.getCTM}return we.exports}var xe={exports:{}},Mt;function bn(){if(Mt)return xe.exports;Mt=1,xe.exports=w,xe.exports.canAttach=e;function w(t,n){var a=e(t);if(!a)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var i=t.parentElement;t.scrollTop=0,n.disableKeyboardInteraction||i.setAttribute("tabindex",0);var l={getBBox:s,getOwner:g,applyTransform:y};return l;function g(){return i}function s(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function y(d){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+d.scale+", 0, 0, "+d.scale+", "+d.x+", "+d.y+")"}}function e(t){return t&&t.parentElement&&t.style}return xe.exports}var qe,Tt;function En(){if(Tt)return qe;Tt=1;var w=hn(),e=pn(),t=vn(),n=gn(),a=yn(),i=a(),l=a(!0),g=wn(),s=xn(),y=bn(),d=1,m=1.75,M=300,O=200;qe=N;function N(b,p){p=p||{};var E=p.controller;if(E||(s.canAttach(b)?E=s(b,p):y.canAttach(b)&&(E=y(b,p))),!E)throw new Error("Cannot create panzoom for the current type of dom element");var S=E.getOwner(),B={x:0,y:0},$=!1,v=new g;E.initTransform&&E.initTransform(v);var j=typeof p.filterKey=="function"?p.filterKey:x,K=typeof p.pinchSpeed=="number"?p.pinchSpeed:1,U=p.bounds,D=typeof p.maxZoom=="number"?p.maxZoom:Number.POSITIVE_INFINITY,F=typeof p.minZoom=="number"?p.minZoom:0,P=typeof p.boundsPadding=="number"?p.boundsPadding:.05,Z=typeof p.zoomDoubleClickSpeed=="number"?p.zoomDoubleClickSpeed:m,be=p.beforeWheel||x,te=p.beforeMouseDown||x,Ee=typeof p.zoomSpeed=="number"?p.zoomSpeed:d,W=f(p.transformOrigin),Se=p.enableTextSelection?l:i;A(U),p.autocenter&&Bt();var ne,Fe=0,Pe=0,re=0,Ze=null,Ve=new Date,Me,ae=!1,ie=!1,V,H,Te,Le,Ce,_;"smoothScroll"in p&&!p.smoothScroll?_=T():_=n(Ht,Yt,p.smoothScroll);var Ne,oe,de,fe=!1;Ke();var he={dispose:Kt,moveBy:Q,moveTo:Ae,smoothMoveTo:Wt,centerOn:Ut,zoomTo:ge,zoomAbs:me,smoothZoom:ve,smoothZoomAbs:nn,showRectangle:Rt,pause:At,resume:kt,isPaused:$t,getTransform:Ot,getMinZoom:It,setMinZoom:zt,getMaxZoom:Dt,setMaxZoom:qt,getTransformOrigin:Ft,setTransformOrigin:Pt,getZoomSpeed:Zt,setZoomSpeed:Vt};t(he);var He=typeof p.initialX=="number"?p.initialX:v.x,_e=typeof p.initialY=="number"?p.initialY:v.y,je=typeof p.initialZoom=="number"?p.initialZoom:v.scale;return(He!=v.x||_e!=v.y||je!=v.scale)&&me(He,_e,je),he;function At(){Ge(),fe=!0}function kt(){fe&&(Ke(),fe=!1)}function $t(){return fe}function Rt(r){var o=S.getBoundingClientRect(),c=G(o.width,o.height),h=r.right-r.left,C=r.bottom-r.top;if(!Number.isFinite(h)||!Number.isFinite(C))throw new Error("Invalid rectangle");var I=c.x/h,z=c.y/C,q=Math.min(I,z);v.x=-(r.left+h/2)*q+c.x/2,v.y=-(r.top+C/2)*q+c.y/2,v.scale=q}function G(r,o){if(E.getScreenCTM){var c=E.getScreenCTM(),h=c.a,C=c.d,I=c.e,z=c.f;B.x=r*h-I,B.y=o*C-z}else B.x=r,B.y=o;return B}function Bt(){var r,o,c=0,h=0,C=We();if(C)c=C.left,h=C.top,r=C.right-C.left,o=C.bottom-C.top;else{var I=S.getBoundingClientRect();r=I.width,o=I.height}var z=E.getBBox();if(!(z.width===0||z.height===0)){var q=o/z.height,ee=r/z.width,X=Math.min(ee,q);v.x=-(z.left+z.width/2)*X+r/2+c,v.y=-(z.top+z.height/2)*X+o/2+h,v.scale=X}}function Ot(){return v}function It(){return F}function zt(r){F=r}function Dt(){return D}function qt(r){D=r}function Ft(){return W}function Pt(r){W=f(r)}function Zt(){return Ee}function Vt(r){if(!Number.isFinite(r))throw new Error("Zoom speed should be a number");Ee=r}function Ht(){return{x:v.x,y:v.y}}function Ae(r,o){v.x=r,v.y=o,ke(),J("pan"),$e()}function Ue(r,o){Ae(v.x+r,v.y+o)}function ke(){var r=We();if(r){var o=!1,c=_t(),h=r.left-c.right;return h>0&&(v.x+=h,o=!0),h=r.right-c.left,h<0&&(v.x+=h,o=!0),h=r.top-c.bottom,h>0&&(v.y+=h,o=!0),h=r.bottom-c.top,h<0&&(v.y+=h,o=!0),o}}function We(){if(U){if(typeof U=="boolean"){var r=S.getBoundingClientRect(),o=r.width,c=r.height;return{left:o*P,top:c*P,right:o*(1-P),bottom:c*(1-P)}}return U}}function _t(){var r=E.getBBox(),o=jt(r.left,r.top);return{left:o.x,top:o.y,right:r.width*v.scale+o.x,bottom:r.height*v.scale+o.y}}function jt(r,o){return{x:r*v.scale+v.x,y:o*v.scale+v.y}}function $e(){$=!0,ne=window.requestAnimationFrame(Gt)}function Ye(r,o,c){if(L(r)||L(o)||L(c))throw new Error("zoom requires valid numbers");var h=v.scale*c;if(h<F){if(v.scale===F)return;c=F/v.scale}if(h>D){if(v.scale===D)return;c=D/v.scale}var C=G(r,o);if(v.x=C.x-c*(C.x-v.x),v.y=C.y-c*(C.y-v.y),U&&P===1&&F===1)v.scale*=c,ke();else{var I=ke();I||(v.scale*=c)}J("zoom"),$e()}function me(r,o,c){var h=c/v.scale;Ye(r,o,h)}function Ut(r){var o=r.ownerSVGElement;if(!o)throw new Error("ui element is required to be within the scene");var c=r.getBoundingClientRect(),h=c.left+c.width/2,C=c.top+c.height/2,I=o.getBoundingClientRect(),z=I.width/2-h,q=I.height/2-C;Q(z,q,!0)}function Wt(r,o){Q(r-v.x,o-v.y,!0)}function Q(r,o,c){if(!c)return Ue(r,o);Ne&&Ne.cancel();var h={x:0,y:0},C={x:r,y:o},I=0,z=0;Ne=e(h,C,{step:function(q){Ue(q.x-I,q.y-z),I=q.x,z=q.y}})}function Yt(r,o){ye(),Ae(r,o)}function Kt(){Ge()}function Ke(){S.addEventListener("mousedown",at,{passive:!1}),S.addEventListener("dblclick",rt,{passive:!1}),S.addEventListener("touchstart",Qe,{passive:!1}),S.addEventListener("keydown",Xe,{passive:!1}),w.addWheelListener(S,lt,{passive:!1}),$e()}function Ge(){w.removeWheelListener(S,lt),S.removeEventListener("mousedown",at),S.removeEventListener("keydown",Xe),S.removeEventListener("dblclick",rt),S.removeEventListener("touchstart",Qe),ne&&(window.cancelAnimationFrame(ne),ne=0),_.cancel(),st(),ct(),Se.release(),Re()}function Gt(){$&&Xt()}function Xt(){$=!1,E.applyTransform(v),J("transform"),ne=0}function Xe(r){var o=0,c=0,h=0;if(r.keyCode===38?c=1:r.keyCode===40?c=-1:r.keyCode===37?o=1:r.keyCode===39?o=-1:r.keyCode===189||r.keyCode===109?h=1:(r.keyCode===187||r.keyCode===107)&&(h=-1),!j(r,o,c,h)){if(o||c){r.preventDefault(),r.stopPropagation();var C=S.getBoundingClientRect(),I=Math.min(C.width,C.height),z=.05,q=I*z*o,ee=I*z*c;Q(q,ee)}if(h){var X=ut(h*100),I=W?ce():Qt();ge(I.x,I.y,X)}}}function Qt(){var r=S.getBoundingClientRect();return{x:r.width/2,y:r.height/2}}function Qe(r){if(Jt(r),se(),r.touches.length===1)return tn(r,r.touches[0]);r.touches.length===2&&(Ce=nt(r.touches[0],r.touches[1]),de=!0,Je())}function Jt(r){p.onTouch&&!p.onTouch(r)||(r.stopPropagation(),r.preventDefault())}function en(r){se(),!(p.onDoubleClick&&!p.onDoubleClick(r))&&(r.preventDefault(),r.stopPropagation())}function tn(r){Pe=new Date;var o=r.touches[0],c=Y(o);Me=c;var h=G(c.x,c.y);V=h.x,H=h.y,Te=V,Le=H,_.cancel(),Je()}function Je(){ae||(ae=!0,document.addEventListener("touchmove",et),document.addEventListener("touchend",pe),document.addEventListener("touchcancel",pe))}function et(r){if(r.touches.length===1){r.stopPropagation();var o=r.touches[0],c=Y(o),h=G(c.x,c.y),C=h.x-V,I=h.y-H;C!==0&&I!==0&&dt(),V=h.x,H=h.y,Q(C,I)}else if(r.touches.length===2){de=!0;var z=r.touches[0],q=r.touches[1],ee=nt(z,q),X=1+(ee/Ce-1)*K,ft=Y(z),ht=Y(q);if(V=(ft.x+ht.x)/2,H=(ft.y+ht.y)/2,W){var c=ce();V=c.x,H=c.y}ge(V,H,X),Ce=ee,r.stopPropagation(),r.preventDefault()}}function se(){re&&(clearTimeout(re),re=0)}function tt(r){if(p.onClick){se();var o=V-Te,c=H-Le,h=Math.sqrt(o*o+c*c);h>5||(re=setTimeout(function(){re=0,p.onClick(r)},M))}}function pe(r){if(se(),r.touches.length>0){var o=Y(r.touches[0]),c=G(o.x,o.y);V=c.x,H=c.y}else{var h=new Date;if(h-Fe<M)if(W){var o=ce();ve(o.x,o.y,Z)}else ve(Me.x,Me.y,Z);else h-Pe<O&&tt(r);Fe=h,Re(),ct()}}function nt(r,o){var c=r.clientX-o.clientX,h=r.clientY-o.clientY;return Math.sqrt(c*c+h*h)}function rt(r){en(r);var o=Y(r);W&&(o=ce()),ve(o.x,o.y,Z)}function at(r){if(se(),!te(r)){if(Ze=r,Ve=new Date,ae)return r.stopPropagation(),!1;var o=r.button===1&&window.event!==null||r.button===0;if(o){_.cancel();var c=Y(r),h=G(c.x,c.y);return Te=V=h.x,Le=H=h.y,document.addEventListener("mousemove",it),document.addEventListener("mouseup",ot),Se.capture(r.target||r.srcElement),!1}}}function it(r){if(!ae){dt();var o=Y(r),c=G(o.x,o.y),h=c.x-V,C=c.y-H;V=c.x,H=c.y,Q(h,C)}}function ot(){var r=new Date;r-Ve<O&&tt(Ze),Se.release(),Re(),st()}function st(){document.removeEventListener("mousemove",it),document.removeEventListener("mouseup",ot),ie=!1}function ct(){document.removeEventListener("touchmove",et),document.removeEventListener("touchend",pe),document.removeEventListener("touchcancel",pe),ie=!1,de=!1,ae=!1}function lt(r){if(!be(r)){_.cancel();var o=r.deltaY;r.deltaMode>0&&(o*=100);var c=ut(o);if(c!==1){var h=W?ce():Y(r);ge(h.x,h.y,c),r.preventDefault()}}}function Y(r){var o,c,h=S.getBoundingClientRect();return o=r.clientX-h.left,c=r.clientY-h.top,{x:o,y:c}}function ve(r,o,c){var h=v.scale,C={scale:h},I={scale:c*h};_.cancel(),ye(),oe=e(C,I,{step:function(z){me(r,o,z.scale)},done:rn})}function nn(r,o,c){var h=v.scale,C={scale:h},I={scale:c};_.cancel(),ye(),oe=e(C,I,{step:function(z){me(r,o,z.scale)}})}function ce(){var r=S.getBoundingClientRect();return{x:r.width*W.x,y:r.height*W.y}}function ge(r,o,c){return _.cancel(),ye(),Ye(r,o,c)}function ye(){oe&&(oe.cancel(),oe=null)}function ut(r){var o=Math.sign(r),c=Math.min(.25,Math.abs(Ee*r/128));return 1-o*c}function dt(){ie||(J("panstart"),ie=!0,_.start())}function Re(){ie&&(de||_.stop(),J("panend"))}function rn(){J("zoomend")}function J(r){he.fire(r,he)}}function f(b){if(b){if(typeof b=="object")return(!k(b.x)||!k(b.y))&&u(b),b;u()}}function u(b){throw console.error(b),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function x(){}function A(b){var p=typeof b;if(!(p==="undefined"||p==="boolean")){var E=k(b.left)&&k(b.top)&&k(b.bottom)&&k(b.right);if(!E)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function k(b){return Number.isFinite(b)}function L(b){return Number.isNaN?Number.isNaN(b):b!==b}function T(){return{start:x,stop:x,cancel:x}}function R(){if(typeof document>"u")return;var b=document.getElementsByTagName("script");if(!b)return;for(var p,E=0;E<b.length;++E){var S=b[E];if(S.src&&S.src.match(/\bpanzoom(\.min)?\.js/)){p=S;break}}if(!p)return;var B=p.getAttribute("query");if(!B)return;var $=p.getAttribute("name")||"pz",v=Date.now();j();function j(){var D=document.querySelector(B);if(!D){var F=Date.now(),P=F-v;if(P<2e3){setTimeout(j,100);return}console.error("Cannot find the panzoom element",$);return}var Z=K(p);console.log(Z),window[$]=N(D,Z)}function K(D){for(var F=D.attributes,P={},Z=0;Z<F.length;++Z){var be=F[Z],te=U(be);te&&(P[te.name]=te.value)}return P}function U(D){if(D.name){var F=D.name[0]==="p"&&D.name[1]==="z"&&D.name[2]==="-";if(F){var P=D.name.substr(3),Z=JSON.parse(D.value);return{name:P,value:Z}}}}}return R(),qe}var Sn=En();const Mn=fn(Sn);class Tn{pz;currentScale=1;constructor(e,t){this.pz=Mn(e,{maxZoom:3,minZoom:.2,bounds:!1,beforeMouseDown:n=>n.target.closest(".db-table")!==null}),this.pz.on("zoom",n=>{const a=n.getTransform();this.currentScale=a.scale,t(this.currentScale)})}getScale(){return this.currentScale}zoomIn(){const e=window.innerWidth/2,t=window.innerHeight/2;this.pz.smoothZoom(e,t,1.25)}zoomOut(){const e=window.innerWidth/2,t=window.innerHeight/2;this.pz.smoothZoom(e,t,.8)}resetView(){this.pz.moveTo(0,0),this.pz.zoomAbs(0,0,1)}dispose(){this.pz.dispose()}}class Lt{el;constructor(e,t,n){this.el=document.createElement("div"),this.el.className="schema-hud";const a=document.createElement("div");a.className="hud-group";const i=this.createButton("+","Zoom In");i.onclick=()=>t.zoomIn();const l=this.createButton("−","Zoom Out");l.onclick=()=>t.zoomOut();const g=this.createButton("⌂","Reset View");g.onclick=()=>t.resetView(),a.append(i,l,g);const s=document.createElement("div");s.className="hud-group";const y=document.createElement("select");y.className="hud-select",y.title="Connection Line Style",[{value:"Curve",text:"Curve"},{value:"Rectilinear",text:"Rectilinear"},{value:"RoundRectilinear",text:"Round Rectilinear"},{value:"Oblique",text:"Oblique"},{value:"RoundOblique",text:"Round Oblique"}].forEach(m=>{const M=document.createElement("option");M.value=m.value,M.innerText=m.text,y.appendChild(M)}),y.onchange=m=>{const M=m.target.value;n.setLineStyle(M)},s.appendChild(y),this.el.append(a,s),e.appendChild(this.el)}createButton(e,t){const n=document.createElement("button");return n.className="hud-btn",n.innerText=e,n.title=t,n}}class Ln{container;wrapper;connectionManager;dragManager;panZoomManager;hud;parsers={dbml:new on};constructor(e,t){this.container=document.getElementById(e),this.wrapper=document.createElement("div"),this.wrapper.className="schema-wrapper",this.container.appendChild(this.wrapper),this.connectionManager=new pt(this.wrapper),this.dragManager=new dn(this.wrapper,this.connectionManager,t),this.panZoomManager=new Tn(this.wrapper,n=>{this.dragManager.updateScale(n),this.connectionManager.updateScale(n)}),this.hud=new Lt(this.container,this.panZoomManager,this.connectionManager)}render(e,t){if(this.wrapper.innerHTML="",this.connectionManager=new pt(this.wrapper),this.dragManager.updateConnectionManager(this.connectionManager),this.connectionManager.updateScale(this.panZoomManager.getScale()),this.container.querySelector(".schema-hud")?.remove(),this.hud=new Lt(this.container,this.panZoomManager,this.connectionManager),!!t.trim())try{let n=(e||"").toLowerCase().trim();n.startsWith(".")&&(n=n.slice(1));const a=this.parsers[n];if(!a)throw new Error(`Unsupported format: ${e}`);const{tables:i,relationships:l}=a.parse(t),g=350,s=300,y=3;i.forEach((d,m)=>{const M=cn.create(d);this.wrapper.appendChild(M);let O=d.x!==void 0?d.x:50+m%y*g,N=d.y!==void 0?d.y:50+Math.floor(m/y)*s;if(M.style.left=`${O}px`,M.style.top=`${N}px`,d.width&&(M.style.width=`${d.width}px`),d.color){const f=M.querySelector(".db-table-header");f&&(f.style.backgroundColor=d.color)}}),this.dragManager.setRelationships(l),setTimeout(()=>{this.connectionManager.draw(l)},0)}catch(n){console.error(n),this.wrapper.innerHTML=`<div class="error">Error: ${n.message}</div>`}}}const Nt=new an(w=>{switch(w.type){case"UPDATE_CONTENT":Cn.render(w.format,w.content);break;case"UPDATE_THEME":Nn(w.theme);break}}),Cn=new Ln("app",(w,e,t,n)=>{Nt.send({type:"UPDATE_TABLE_POS",tableName:w,x:e,y:t,width:n})});function Nn(w){w==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")}Nt.log("Webview Initialized");</script>
  <style rel="stylesheet" crossorigin>.db-table{position:absolute;top:0;left:0;min-width:200px;width:auto;background:var(--table-bg);border:1px solid var(--table-border);border-radius:8px;box-shadow:0 4px 6px #0000001a;z-index:1;display:flex;flex-direction:column}.db-table.dragging,.db-table.resizing{box-shadow:0 10px 15px #0003;z-index:100}.db-table.dragging{cursor:grabbing}.db-table.resizing{cursor:col-resize}.db-table-header{background:var(--header-bg);color:var(--header-text);padding:10px;font-weight:700;border-top-left-radius:7px;border-top-right-radius:7px;cursor:grab;display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:8px}.db-table-header:active{cursor:grabbing}.header-title-wrapper{display:flex;align-items:center;gap:6px}.table-icon{width:16px;height:16px;display:flex;opacity:.9}.table-icon svg{width:100%;height:100%;stroke-width:2.5px}.title{font-size:15px;line-height:1.2}.schema-banner{background:#fff3;padding:2px 6px;border-radius:4px;font-size:12px}.table-note{font-size:11px;color:#fffc;margin-top:4px;width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.resize-handle{position:absolute;top:0;right:0;width:12px;height:100%;cursor:col-resize;z-index:50;background:transparent;border-right:4px solid rgba(0,0,0,.1);transition:all .2s;border-top-right-radius:8px;border-bottom-right-radius:8px}.resize-handle:hover,.db-table.resizing .resize-handle{background-color:#3b82f61a;border-right:4px solid var(--header-bg)}body.dark .resize-handle{border-right:4px solid rgba(255,255,255,.1)}body.dark .resize-handle:hover{border-right:4px solid var(--header-bg)}.db-row{display:flex;justify-content:space-between;padding:8px;border-bottom:1px solid var(--table-border);font-size:13px;line-height:1.4;position:relative;transition:background-color .15s ease}.db-row:hover{background-color:#7d7d7d0d}.db-row:last-child{border-bottom:none;border-bottom-left-radius:8px;border-bottom-right-radius:8px}.indexed-row{background:linear-gradient(to right,rgba(var(--header-rgb),.08),transparent)}.row-left{display:flex;align-items:flex-start;gap:8px;flex:1;min-width:0;padding-right:8px}.key-icon{width:12px;height:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}.key-icon svg{width:100%;height:100%}.key-icon.pk{color:#eab308}.key-icon.fk{color:#3b82f6}.key-icon.pk-fk{color:#22c55e}.key-icon.empty{width:16px}.name-container{display:flex;flex-direction:column;overflow:hidden}.field-name{font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.field-note{font-size:11px;color:var(--text-secondary);margin-top:2px;line-height:1.2;font-style:italic;opacity:.8}.row-right{display:flex;align-items:flex-start;justify-content:flex-end;gap:6px;flex-shrink:0}.type-container{display:flex;flex-direction:column;align-items:flex-end}.field-type{color:var(--text-secondary);font-size:11px;font-family:SF Mono,Monaco,Menlo,Courier New,monospace;text-align:right;background:#9696961a;padding:1px 4px;border-radius:4px}.constrained-type{text-decoration-color:var(--header-bg);text-decoration-thickness:2px}.field-default{font-size:10px;color:var(--text-secondary);opacity:.7;text-align:right;margin-top:2px;max-width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.badge{font-size:9px;height:16px;padding:0 6px;display:flex;align-items:center;justify-content:center;border-radius:10px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 1px 2px #0000000d}.badge.unique{background:#f3e8ff;color:#7e22ce;border:1px solid rgba(126,34,206,.1)}.badge.not-null{background:#f3f4f6;color:#4b5563;border:1px solid rgba(75,85,99,.1)}.badge.enum{background:#ecfdf5;color:#047857;border:1px solid rgba(4,120,87,.1)}body.dark .db-row:hover{background-color:#ffffff0d}body.dark .field-type{background:#ffffff14;color:#a1a1aa}body.dark .badge.unique{background:#3b0764;color:#d8b4fe;border-color:#581c87}body.dark .badge.not-null{background:#374151;color:#e5e7eb;border-color:#4b5563}body.dark .badge.enum{background:#064e3b;color:#6ee7b7;border-color:#065f46}@keyframes flashHighlight{0%{box-shadow:inset 3px 0 0 var(--header-bg),0 0 #0000}50%{box-shadow:inset 3px 0 0 var(--header-bg),0 0 12px rgba(var(--header-rgb),.4)}to{box-shadow:inset 3px 0 0 var(--header-bg),0 0 #0000}}.db-row.highlighted{background-color:rgba(var(--header-rgb),.1);color:var(--text-primary);animation:flashHighlight 1.5s infinite;z-index:10}.db-table.highlighted{border-color:var(--header-bg);animation:flashTable 1.5s infinite;z-index:20}@keyframes flashTable{0%{box-shadow:0 4px 6px #0000001a}50%{box-shadow:0 0 15px rgba(var(--header-rgb),.6)}to{box-shadow:0 4px 6px #0000001a}}.connection-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:visible}.connection-group{pointer-events:auto;cursor:pointer}.relation-hit-area{fill:none;stroke:transparent;stroke-width:20px}.relation-line-base{fill:none;stroke:var(--line-color);stroke-width:2px;stroke-linecap:round;transition:stroke .3s,stroke-width .3s}.relation-line-flow{fill:none;stroke:var(--header-bg);stroke-width:2px;stroke-linecap:round;stroke-dasharray:15 150;opacity:.4;animation:flowAnimation 5s linear infinite}@keyframes flowAnimation{to{stroke-dashoffset:-165}}@keyframes continuousFlow{to{stroke-dashoffset:-24}}.connection-group.highlighted .relation-line-base{stroke:var(--header-bg);stroke-width:3px;opacity:.5}.connection-group.highlighted .relation-line-flow{opacity:1;stroke-width:3px;stroke-dasharray:12 12;animation:continuousFlow .8s linear infinite;filter:drop-shadow(0 0 4px var(--header-bg))}.anchor-port{fill:var(--bg-color);stroke:var(--line-color);stroke-width:2px;transition:all .3s}.anchor-port.highlighted{stroke:var(--header-bg);fill:var(--header-bg);r:5px;filter:drop-shadow(0 0 3px var(--header-bg))}.label-bg{fill:var(--bg-color);stroke:var(--table-border);transition:all .3s}.connection-group.highlighted .label-bg{stroke:var(--header-bg);fill:#fff}.relation-label-text{font-size:10px;font-weight:700;fill:var(--text-secondary);text-anchor:middle;dominant-baseline:middle;pointer-events:none}.connection-group.highlighted .relation-label-text{fill:var(--header-bg)}.schema-hud{position:absolute;bottom:20px;right:20px;background:var(--table-bg);border:1px solid var(--table-border);border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;align-items:center;padding:6px;gap:12px;z-index:1000;-webkit-user-select:none;user-select:none}.hud-group{display:flex;gap:4px}.hud-group+.hud-group{border-left:1px solid var(--table-border);padding-left:12px}.hud-btn{background:transparent;border:1px solid transparent;color:var(--text-primary);border-radius:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;cursor:pointer;transition:all .2s}.hud-btn:hover{background:rgba(var(--header-rgb),.1);color:var(--header-bg)}.hud-btn:active{background:rgba(var(--header-rgb),.2)}.hud-select{background:var(--bg-color);color:var(--text-primary);border:1px solid var(--table-border);border-radius:4px;padding:4px 8px;font-size:12px;outline:none;cursor:pointer}.hud-select:focus{border-color:var(--header-bg)}:root{--bg-color: #f4f4f4;--table-bg: #ffffff;--table-border: #d1d5db;--header-bg: #3b82f6;--header-rgb: 59, 130, 246;--header-text: #ffffff;--text-primary: #1f2937;--text-secondary: #6b7280;--line-color: #9ca3af}body.dark{--bg-color: #1e1e1e;--table-bg: #2b2d30;--table-border: #4e5256;--header-bg: #3574f0;--header-rgb: 53, 116, 240;--header-text: #ffffff;--text-primary: #d1d5db;--text-secondary: #9ca3af;--line-color: #6b7280}body{margin:0;background:var(--bg-color);color:var(--text-primary);font-family:sans-serif;overflow:hidden}#app{width:100vw;height:100vh;overflow:hidden}.schema-wrapper{width:100%;height:100%;transform-origin:0 0;position:relative}</style>
</head>

<body>
<div id="app"></div>
</body>

</html>
