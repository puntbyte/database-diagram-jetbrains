<!-- web/index.html -->
<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8"/>
    <link rel="icon" type="image/svg+xml" href="./vite.svg"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>web</title>
  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class un{onMessage;constructor(e){this.onMessage=e,window.addEventListener("message",t=>{const n=t.data;n&&typeof n.type=="string"&&this.onMessage(n)}),this.send({type:"READY"})}send(e){const t=JSON.stringify(e);window.cefQuery?window.cefQuery({request:t}):console.log("Bridge Dev Log:",e)}log(e){this.send({type:"LOG",level:"INFO",message:e})}}function De(d){return d.replace(/[^a-zA-Z0-9_]/g,"_")}function dn(d){return d.replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"")}function Ve(d){const e=new Map;if(!d)return e;const t=d.split(",").map(n=>n.trim()).filter(Boolean);for(let n of t)if(n.includes(":")){const[r,...o]=n.split(":");e.set(r.trim().toLowerCase(),o.join(":").trim())}else e.set(n.toLowerCase(),"true");return e}function hn(d){const e={},n=/Project\s*(?:(?:"[^"]*")|(?:[\w]+))?\s*\{([\s\S]*?)\}/i.exec(d);return n&&n[1].split(`
`).forEach(s=>{const w=s.split(":");if(w.length>=2){const a=w[0].trim();let m=w.slice(1).join(":").trim();(m.startsWith("'")&&m.endsWith("'")||m.startsWith('"')&&m.endsWith('"'))&&(m=m.substring(1,m.length-1)),!isNaN(Number(m))&&m!==""?e[a]=Number(m):e[a]=m}}),e}function wt(d){const e=[],t=d.split(`
`).map(n=>n.trim()).filter(Boolean);for(let n of t){const r=/^(\(?\s*[\w\.,\s]+\s*\)?)(?:\s*\[(.*?)\])?$/i.exec(n);if(!r)continue;const o=r[1].replace(/^\(/,"").replace(/\)$/,"").split(",").map(w=>w.trim()).filter(Boolean),s=Ve(r[2]||"");e.push({columns:o,settings:Object.fromEntries(s),raw:n})}return e}function Bt(d,e,t){const n=t.split(",").map(x=>x.trim());let r=!1,o=!1,s=!1,w=!1,a,m,h,v;for(const x of n){/pk|primary key/i.test(x)&&(r=!0),/unique/i.test(x)&&(o=!0),/not null/i.test(x)&&(s=!0);const N=/note:\s*(['"])([\s\S]*?)\1/i.exec(x);N&&(a=N[2]);const C=/default:\s*(['`])?([\s\S]*?)\1?/i.exec(x);C&&(m=C[2]);const f=/ref:\s*(<>|[<>=-])\s*("?[\w.]+"?)\.("?[\w"]+"?)/i.exec(x);f&&(w=!0,v={symbol:f[1],toTable:f[2],toColumn:f[3]})}return{name:d,type:e,isPk:r,isUnique:o,isNotNull:s,isFk:w,note:a,default:m,enumValues:h,inlineRef:v}}function fn(d){const e=[],t=d.split(`
`);for(let n of t){if(n=n.trim(),!n||n.startsWith("Note"))continue;const o=/^("?[\w]+"?)\s+([a-zA-Z0-9_()]+)(?:\s*\[(.*?)\])?/.exec(n);o&&e.push(Bt(o[1].replace(/"/g,""),o[2],o[3]||""))}return{fields:e}}function $t(d,e,t,n,r){const o=w=>w.replace(/"/g,"");let s="1:n";return t==="<"?s="1:n":t===">"?s="n:1":t==="-"?s="1:1":t==="<>"&&(s="m:n"),{fromTable:De(o(d)),fromColumn:o(e),toTable:De(o(n)),toColumn:o(r),type:s}}function mn(d){const e=[],t=/("?[\w.]+"?)\.("?[\w"]+"?)\s*(<>|[<>=-])\s*("?[\w.]+"?)\.("?[\w"]+"?)/g,n=/Ref\s*[^{:]*[:\{]\s*([^}]+)\s*\}?/gi;let r;for(;(r=n.exec(d))!==null;){const o=r[1];let s;for(;(s=t.exec(o))!==null;)e.push($t(s[1],s[2],s[3],s[4],s[5]))}return e}function pn(d){const e=[],t=[],n=new Map,r=/TablePartial\s+("?[\w.]+"?)\s*(?:\[(.*?)\])?\s*\{([\s\S]*?)\}/gi;let o;for(;(o=r.exec(d))!==null;){const a=o[1].replace(/"/g,""),m=o[2]||"",h=o[3]||"",v=/indexes\s*\{([\s\S]*?)\}/i.exec(h);let x=[],N=h;v&&(x=wt(v[1]),N=h.replace(v[0],""));const{fields:C}=fn(N);n.set(a,{name:a,settings:Ve(m),fields:C,indexes:x})}const s=/Table\s+("?[\w.]+"?)\s*(?:\[(.*?)\])?\s*(?:as\s+\w+\s*)?\{([\s\S]*?)\}/gi;let w;for(;(w=s.exec(d))!==null;){const a=w[1].replace(/"/g,""),m=w[2]||"",h=w[3]||"",v=Ve(m),x=/indexes\s*\{([\s\S]*?)\}/i.exec(h);let N=[],C=h;x&&(N=wt(x[1]),C=h.replace(x[0],""));const f=C.split(`
`),l=new Map,L=[],A=new Map,S=new Map;for(let $ of f){const b=$.trim();if(!b)continue;if(b.startsWith("~")){const E=b.replace(/^~\s*/,"").trim(),R=n.get(E);if(R){for(const[T,p]of R.settings.entries())S.set(T,p);for(const T of R.fields){if(l.has(T.name)){const p=L.indexOf(T.name);p!==-1&&L.splice(p,1)}l.set(T.name,T),L.push(T.name)}for(const T of R.indexes)A.set(T.columns.join("|").toLowerCase(),T)}continue}const M=/^("?[\w]+"?)\s+([a-zA-Z0-9_()]+)(?:\s*\[(.*?)\])?/.exec(b);if(M){const E=M[1].replace(/"/g,""),R=Bt(E,M[2],M[3]||"");if(l.has(R.name)){const T=L.indexOf(R.name);T!==-1&&L.splice(T,1)}l.set(R.name,R),L.push(R.name)}}for(const $ of N)A.set($.columns.join("|").toLowerCase(),$);for(const[$,b]of v.entries())S.set($,b);const k=L.map($=>l.get($)).filter(Boolean);k.forEach($=>{$.inlineRef&&t.push($t(a,$.name,$.inlineRef.symbol,$.inlineRef.toTable,$.inlineRef.toColumn))});const B=/Note:\s*(['"])([\s\S]*?)\1/i.exec(h);e.push({id:De(a),name:a,fields:k,note:B?B[2]:void 0,color:S.get("color")||void 0,width:S.has("width")?parseInt(S.get("width"),10):void 0,x:S.has("x")?parseInt(S.get("x"),10):void 0,y:S.has("y")?parseInt(S.get("y"),10):void 0,settings:Object.fromEntries(S),indexes:Array.from(A.values())})}return{tables:e,inlineRelationships:t}}class vn{parse(e){const t=dn(e),n=hn(t),{tables:r,inlineRelationships:o}=pn(t),s=mn(t),w=[...o,...s];return{tables:r,relationships:w,projectSettings:n}}}const gn=`<?xml version="1.0" encoding="utf-8"?>\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="800px" height="800px" viewBox="0 0 24 24"><path d="M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>`,wn=`<?xml version="1.0" encoding="utf-8"?>\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\r
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M4 9L20 9M8 9V20M6.2 20H17.8C18.9201 20 19.4802 20 19.908 19.782C20.2843 19.5903 20.5903 19.2843 20.782 18.908C21 18.4802 21 17.9201 21 16.8V7.2C21 6.0799 21 5.51984 20.782 5.09202C20.5903 4.71569 20.2843 4.40973 19.908 4.21799C19.4802 4 18.9201 4 17.8 4H6.2C5.0799 4 4.51984 4 4.09202 4.21799C3.71569 4.40973 3.40973 4.71569 3.21799 5.09202C3 5.51984 3 6.07989 3 7.2V16.8C3 17.9201 3 18.4802 3.21799 18.908C3.40973 19.2843 3.71569 19.5903 4.09202 19.782C4.51984 20 5.07989 20 6.2 20Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r
</svg>`,yn=`<?xml version="1.0" encoding="utf-8"?>\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\r
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M6 12H18M12 6V18" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r
</svg>`,xn=`<?xml version="1.0" encoding="utf-8"?>\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\r
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M6 12L18 12" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r
</svg>`,bn=`<?xml version="1.0" encoding="utf-8"?>\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->\r
<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\r
<path d="M15 4V7C15 8.10457 15.8954 9 17 9H20M9 4V7C9 8.10457 8.10457 9 7 9H4M15 20V17C15 15.8954 15.8954 15 17 15H20M9 20V17C9 15.8954 8.10457 15 7 15H4" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\r
</svg>`,Ln=`<?xml version="1.0" encoding="utf-8"?>
\r\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">\r
  <title>grid</title>\r
  <g id="Layer_2" data-name="Layer 2">\r
    <g id="invisible_box" data-name="invisible box">\r
      <rect width="48" height="48" fill="none"/>\r
    </g>\r
    <g id="icons_Q2" data-name="icons Q2">\r
      <path d="M44,26a2,2,0,0,0,0-4H38V14h6a2,2,0,0,0,0-4H38V4a2,2,0,0,0-4,0v6H26V4a2,2,0,0,0-4,0v6H14V4a2,2,0,0,0-4,0v6H4a2,2,0,0,0,0,4h6v8H4a2,2,0,0,0,0,4h6v8H4a2,2,0,0,0,0,4h6v6a2,2,0,0,0,4,0V38h8v6a2,2,0,0,0,4,0V38h8v6a2,2,0,0,0,4,0V38h6a2,2,0,0,0,0-4H38V26ZM34,14v8H26V14ZM14,14h8v8H14Zm0,20V26h8v8Zm20,0H26V26h8Z"/>\r
    </g>\r
  </g>\r
</svg>`,Sn=`<?xml version="1.0" encoding="UTF-8"?>\r
\x3C!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
<svg width="800px" height="800px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\r
    <title>up_fill</title>\r
    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\r
        <g id="Arrow" transform="translate(-434.000000, -48.000000)">\r
            <g id="up_fill" transform="translate(434.000000, 48.000000)">\r
                <path d="M24,0 L24,24 L0,24 L0,0 L24,0 Z M12.5934901,23.257841 L12.5819402,23.2595131 L12.5108777,23.2950439 L12.4918791,23.2987469 L12.4918791,23.2987469 L12.4767152,23.2950439 L12.4056548,23.2595131 C12.3958229,23.2563662 12.3870493,23.2590235 12.3821421,23.2649074 L12.3780323,23.275831 L12.360941,23.7031097 L12.3658947,23.7234994 L12.3769048,23.7357139 L12.4804777,23.8096931 L12.4953491,23.8136134 L12.4953491,23.8136134 L12.5071152,23.8096931 L12.6106902,23.7357139 L12.6232938,23.7196733 L12.6232938,23.7196733 L12.6266527,23.7031097 L12.609561,23.275831 C12.6075724,23.2657013 12.6010112,23.2592993 12.5934901,23.257841 L12.5934901,23.257841 Z M12.8583906,23.1452862 L12.8445485,23.1473072 L12.6598443,23.2396597 L12.6498822,23.2499052 L12.6498822,23.2499052 L12.6471943,23.2611114 L12.6650943,23.6906389 L12.6699349,23.7034178 L12.6699349,23.7034178 L12.678386,23.7104931 L12.8793402,23.8032389 C12.8914285,23.8068999 12.9022333,23.8029875 12.9078286,23.7952264 L12.9118235,23.7811639 L12.8776777,23.1665331 C12.8752882,23.1545897 12.8674102,23.1470016 12.8583906,23.1452862 L12.8583906,23.1452862 Z M12.1430473,23.1473072 C12.1332178,23.1423925 12.1221763,23.1452606 12.1156365,23.1525954 L12.1099173,23.1665331 L12.0757714,23.7811639 C12.0751323,23.7926639 12.0828099,23.8018602 12.0926481,23.8045676 L12.108256,23.8032389 L12.3092106,23.7104931 L12.3186497,23.7024347 L12.3186497,23.7024347 L12.3225043,23.6906389 L12.340401,23.2611114 L12.337245,23.2485176 L12.337245,23.2485176 L12.3277531,23.2396597 L12.1430473,23.1473072 Z" id="MingCute" fill-rule="nonzero">
\r</path>\r
                <path d="M10.9393,7.93932 C11.5251,7.35354 12.4749,7.35354 13.0607,7.93932 L18.7175,13.5962 C19.3033,14.182 19.3033,15.1317 18.7175,15.7175 C18.1317,16.3033 17.182,16.3033 16.5962,15.7175 L12,11.1213 L7.40381,15.7175 C6.81802,16.3033 5.86827,16.3033 5.28248,15.7175 C4.6967,15.1317 4.6967,14.182 5.28249,13.5962 L10.9393,7.93932 Z" id="路径" fill="#09244B">
\r</path>\r
            </g>\r
        </g>\r
    </g>\r
</svg>`,Q={Key:gn,Table:wn,ZoomIn:yn,ZoomOut:xn,Center:bn,Grid:Ln,ChevronUp:Sn};class Cn{static create(e,t){const n=document.createElement("div");n.className="db-row",n.id=`col-${t}-${e.name}`,e.isUnique&&n.classList.add("indexed-row");const r=document.createElement("div");r.className="row-left";const o=document.createElement("span");o.className="key-icon",e.isPk||e.isFk?(o.innerHTML=Q.Key,e.isPk&&e.isFk?(o.classList.add("pk-fk"),o.title="Primary & Foreign Key"):e.isPk?(o.classList.add("pk"),o.title="Primary Key"):(o.classList.add("fk"),o.title="Foreign Key")):o.classList.add("empty"),r.appendChild(o);const s=document.createElement("div");s.className="name-container";const w=document.createElement("span");if(w.className="field-name",w.innerText=e.name,s.appendChild(w),e.note){const v=document.createElement("div");v.className="field-note",v.innerText=e.note,s.appendChild(v)}r.appendChild(s);const a=document.createElement("div");a.className="row-right";const m=document.createElement("div");m.className="type-container";const h=document.createElement("span");if(h.className="field-type",e.isUnique&&h.classList.add("constrained-type"),h.innerText=e.type,m.appendChild(h),e.enumValues&&e.enumValues.length>0){const v=this.createBadge("ENUM","enum");v.title=`Enum values: ${e.enumValues.join(", ")}`,a.appendChild(v)}if(e.isUnique&&a.appendChild(this.createBadge("UQ","unique")),e.isNotNull&&a.appendChild(this.createBadge("NN","not-null")),e.default){const v=document.createElement("div");v.className="field-default",v.innerText=`default: ${e.default}`,m.appendChild(v)}return a.appendChild(m),n.appendChild(r),n.appendChild(a),n}static createBadge(e,t){const n=document.createElement("span");return n.className=`badge ${t}`,n.innerText=e,n}}class Mn{static create(e){const t=document.createElement("div");t.className="db-table",t.id=`table-${e.id}`,t.dataset.tableName=e.name;const n=e.color||"var(--header-bg)";t.style.setProperty("--table-main-color",n),e.width&&(t.style.width=`${e.width}px`);const[r,o]=e.name.includes(".")?e.name.split("."):["",e.name],s=document.createElement("div");s.className="semantic-overlay";const w=document.createElement("div");w.className="overlay-text",w.innerText=o,s.appendChild(w),t.appendChild(s);const a=document.createElement("div");a.className="db-table-header";const m=document.createElement("div");m.className="header-title-wrapper";const h=document.createElement("span");h.className="table-icon",h.innerHTML=Q.Table,m.appendChild(h);const v=document.createElement("span");v.className="title",v.innerText=o,m.appendChild(v),a.appendChild(m);const x=document.createElement("span");if(x.className="schema-banner",x.innerText=r||"public",a.appendChild(x),e.note){const C=document.createElement("div");C.className="table-note",C.innerText=e.note,a.appendChild(C)}t.appendChild(a),e.fields.forEach(C=>{t.appendChild(Cn.create(C,e.id))});const N=document.createElement("div");return N.className="resize-handle",N.title="Drag to resize",t.appendChild(N),t}}class En{static MIN_STRAIGHT=15;static MAX_STRAIGHT=40;static LABEL_OFFSET=25;static calculatePath(e,t,n,r,o,s,w="Curve"){const a=e.y+e.height/2,m=t.y+t.height/2,h={x:e.x+e.width,y:a},v={x:e.x,y:a},x={x:t.x+t.width,y:m},N={x:t.x,y:m},C=e.x<t.x+t.width&&e.x+e.width>t.x;let f,l,L,A;C?(f=h,l=x,L=1,A=1):e.x<t.x?(f=h,l=N,L=1,A=-1):(f=v,l=x,L=-1,A=1);const S=Math.abs(l.x-f.x),k=Math.max(this.MIN_STRAIGHT,Math.min(this.MAX_STRAIGHT,S/3)),B={x:f.x+k*L,y:f.y},$={x:l.x+k*A,y:l.y};if(C){const E=Math.max(40,Math.abs(l.y-f.y)*.4);B.x=Math.max(f.x,l.x)+E,$.x=B.x}let b="";switch(w){case"Rectilinear":case"RoundRectilinear":{const E=(B.x+$.x)/2,R={x:E,y:f.y},T={x:E,y:l.y};if(w==="Rectilinear")b=`M ${f.x} ${f.y} L ${R.x} ${R.y} L ${T.x} ${T.y} L ${l.x} ${l.y}`;else{const p=Math.min(15,Math.abs(T.y-R.y)/2,Math.abs(R.x-f.x)/2),j=l.y>f.y?1:-1,Y=R.x>f.x?1:-1,_=l.x>T.x?1:-1;b=`M ${f.x} ${f.y} 
               L ${R.x-p*Y} ${R.y} 
               Q ${R.x} ${R.y} ${R.x} ${R.y+p*j} 
               L ${T.x} ${T.y-p*j} 
               Q ${T.x} ${T.y} ${T.x+p*_} ${T.y} 
               L ${l.x} ${l.y}`}break}case"Oblique":case"RoundOblique":{w==="Oblique"?b=`M ${f.x} ${f.y} L ${B.x} ${B.y} L ${$.x} ${$.y} L ${l.x} ${l.y}`:b=`M ${f.x} ${f.y} 
               L ${B.x} ${B.y} 
               Q ${(B.x+$.x)/2} ${(B.y+$.y)/2} ${$.x} ${$.y} 
               L ${l.x} ${l.y}`;break}default:{b=`M ${f.x} ${f.y} C ${B.x} ${B.y}, ${$.x} ${$.y}, ${l.x} ${l.y}`;break}}const y=this.getLabelPos(f,B),M=this.getLabelPos(l,$);return{d:b,start:f,end:l,labelStart:y,labelEnd:M,fromId:n,toId:r,fromTableId:o,toTableId:s}}static getLabelPos(e,t){const n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r),s=this.LABEL_OFFSET/(o||1);return{x:e.x+n*s,y:e.y+r*s}}}class Tn{static createGroup(e,t){const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.classList.add("connection-group"),n.dataset.from=e.fromId,n.dataset.to=e.toId,n.dataset.fromTable=e.fromTableId,n.dataset.toTable=e.toTableId;const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",e.d),r.classList.add("relation-hit-area"),n.appendChild(r);const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",e.d),o.classList.add("relation-line-base"),n.appendChild(o);const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",e.d),s.classList.add("relation-line-flow"),n.appendChild(s),this.createLabels(e,t).forEach(a=>n.appendChild(a)),n}static createLabels(e,t){const n=this.getLabelText(t);return n?[this.createLabelBadge(n.from,e.labelStart.x,e.labelStart.y),this.createLabelBadge(n.to,e.labelEnd.x,e.labelEnd.y)]:[]}static createLabelBadge(e,t,n){const r=document.createElementNS("http://www.w3.org/2000/svg","g");r.classList.add("relation-label-group");const o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",(t-9).toString()),o.setAttribute("y",(n-7).toString()),o.setAttribute("width","18"),o.setAttribute("height","14"),o.setAttribute("rx","4"),o.classList.add("label-bg");const s=document.createElementNS("http://www.w3.org/2000/svg","text");return s.setAttribute("x",t.toString()),s.setAttribute("y",(n+1).toString()),s.classList.add("relation-label-text"),s.textContent=e,r.appendChild(o),r.appendChild(s),r}static getLabelText(e){switch(e){case"1:n":return{from:"1",to:"n"};case"n:1":return{from:"n",to:"1"};case"1:1":return{from:"1",to:"1"};case"m:n":return{from:"m",to:"n"};default:return null}}}class yt{static create(e){const t=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.setAttribute("cx",e.x.toString()),t.setAttribute("cy",e.y.toString()),t.setAttribute("r","3.5"),t.classList.add("anchor-port"),t}}class xt{svgLayer;scale=1;container;currentRelationships=[];currentLineStyle="Curve";constructor(e){this.container=e,this.svgLayer=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgLayer.classList.add("connection-layer"),e.appendChild(this.svgLayer),this.setupInteractions()}updateScale(e){this.scale=e}setLineStyle(e){this.currentLineStyle=e,this.draw(this.currentRelationships)}draw(e){this.currentRelationships=e,this.svgLayer.innerHTML="",e.forEach(t=>this.drawOne(t))}drawOne(e){const t=`col-${e.fromTable}-${e.fromColumn}`,n=`col-${e.toTable}-${e.toColumn}`,r=document.getElementById(t),o=document.getElementById(n);if(!r||!o)return;const s=this.getRelativeRect(r),w=this.getRelativeRect(o),a=En.calculatePath(s,w,t,n,`table-${e.fromTable}`,`table-${e.toTable}`,this.currentLineStyle),m=Tn.createGroup(a,e.type);this.svgLayer.appendChild(m);const h=yt.create(a.start);h.dataset.anchorId=t,this.svgLayer.appendChild(h);const v=yt.create(a.end);v.dataset.anchorId=n,this.svgLayer.appendChild(v)}getRelativeRect(e){const t=e.getBoundingClientRect(),n=this.svgLayer.getBoundingClientRect();return{x:(t.left-n.left)/this.scale,y:(t.top-n.top)/this.scale,width:t.width/this.scale,height:t.height/this.scale}}setupInteractions(){this.container.addEventListener("mouseover",e=>this.handleHover(e,!0)),this.container.addEventListener("mouseout",e=>this.handleHover(e,!1))}handleHover(e,t){if(!t){this.clearHighlights();return}const n=e.target,r=n.closest(".connection-group");if(r){this.activateConnection(r);return}const o=n.closest(".db-row");if(o&&o.id){this.activateColumn(o.id);return}const s=n.closest(".db-table");if(s&&s.id){this.activateTable(s.id);return}}clearHighlights(){document.querySelectorAll(".highlighted").forEach(t=>t.classList.remove("highlighted"))}activateConnection(e){e.classList.add("highlighted");const t=e.dataset.from,n=e.dataset.to;t&&this.setHighlight(t),n&&this.setHighlight(n),this.highlightAnchorsForLine(t,n)}activateColumn(e){this.setHighlight(e),this.svgLayer.querySelectorAll(`[data-from="${e}"], [data-to="${e}"]`).forEach(n=>{n.classList.add("highlighted");const r=n;r.dataset.from!==e&&this.setHighlight(r.dataset.from),r.dataset.to!==e&&this.setHighlight(r.dataset.to),this.highlightAnchorsForLine(r.dataset.from,r.dataset.to)})}activateTable(e){this.setHighlight(e),this.svgLayer.querySelectorAll(`[data-from-table="${e}"], [data-to-table="${e}"]`).forEach(n=>{n.classList.add("highlighted");const r=n;this.setHighlight(r.dataset.from),this.setHighlight(r.dataset.to),this.highlightAnchorsForLine(r.dataset.from,r.dataset.to)})}setHighlight(e){if(!e)return;const t=document.getElementById(e);t&&t.classList.add("highlighted")}highlightAnchorsForLine(e,t){e&&this.svgLayer.querySelectorAll(`[data-anchor-id="${e}"]`).forEach(r=>r.classList.add("highlighted")),t&&this.svgLayer.querySelectorAll(`[data-anchor-id="${t}"]`).forEach(r=>r.classList.add("highlighted"))}}class Nn{activeEl=null;mode="NONE";initialMouse={x:0,y:0};initialVal={x:0,y:0,width:0};scale=1;relationships=[];connectionManager;onUpdate;constructor(e,t,n){this.connectionManager=t,this.onUpdate=n,e.addEventListener("mousedown",r=>this.onMouseDown(r)),window.addEventListener("mousemove",r=>this.onMouseMove(r)),window.addEventListener("mouseup",()=>this.onMouseUp())}updateConnectionManager(e){this.connectionManager=e}setRelationships(e){this.relationships=e}updateScale(e){this.scale=e}onMouseDown(e){const t=e.target;if(t.classList.contains("resize-handle")){const n=t.closest(".db-table");n&&this.startResize(n,e);return}if(t.closest(".db-table-header")||t.closest(".semantic-overlay")){const n=t.closest(".db-table");n&&this.startDrag(n,e);return}}startDrag(e,t){this.mode="DRAG",this.activeEl=e,this.initialVal.x=e.offsetLeft,this.initialVal.y=e.offsetTop,this.initialMouse={x:t.clientX,y:t.clientY},t.stopPropagation(),t.preventDefault(),e.classList.add("dragging")}startResize(e,t){this.mode="RESIZE",this.activeEl=e,this.initialVal.width=e.offsetWidth,this.initialMouse={x:t.clientX,y:t.clientY},t.stopPropagation(),t.preventDefault(),e.classList.add("resizing"),document.body.style.cursor="col-resize"}onMouseMove(e){if(this.activeEl){if(this.mode==="DRAG"){const t=(e.clientX-this.initialMouse.x)/this.scale,n=(e.clientY-this.initialMouse.y)/this.scale;this.activeEl.style.left=`${this.initialVal.x+t}px`,this.activeEl.style.top=`${this.initialVal.y+n}px`,this.activeEl.style.transform="none",this.connectionManager.draw(this.relationships)}else if(this.mode==="RESIZE"){const t=(e.clientX-this.initialMouse.x)/this.scale,n=Math.max(200,this.initialVal.width+t);this.activeEl.style.width=`${n}px`,this.connectionManager.draw(this.relationships)}}}onMouseUp(){if(!this.activeEl)return;const e=this.activeEl,t=e.querySelector(".title"),n=e.dataset&&e.dataset.tableName||(t?t.textContent||"":e.id.replace("table-",""));if(n){const r=Math.round(parseInt(e.style.left||"0",10)),o=Math.round(parseInt(e.style.top||"0",10)),s=Math.round(e.getBoundingClientRect().width/this.scale);this.onUpdate(n,r,o,s)}e.classList.remove("dragging"),e.classList.remove("resizing"),document.body.style.cursor="",this.activeEl=null,this.mode="NONE"}}function An(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var ue={exports:{}},bt;function Rn(){if(bt)return ue.exports;bt=1,ue.exports=d,ue.exports.addWheelListener=d,ue.exports.removeWheelListener=e;function d(t,n,r){t.addEventListener("wheel",n,r)}function e(t,n,r){t.removeEventListener("wheel",n,r)}return ue.exports}var de={exports:{}},Oe,Lt;function kn(){if(Lt)return Oe;Lt=1;var d=4,e=.001,t=1e-7,n=10,r=11,o=1/(r-1),s=typeof Float32Array=="function";function w(f,l){return 1-3*l+3*f}function a(f,l){return 3*l-6*f}function m(f){return 3*f}function h(f,l,L){return((w(l,L)*f+a(l,L))*f+m(l))*f}function v(f,l,L){return 3*w(l,L)*f*f+2*a(l,L)*f+m(l)}function x(f,l,L,A,S){var k,B,$=0;do B=l+(L-l)/2,k=h(B,A,S)-f,k>0?L=B:l=B;while(Math.abs(k)>t&&++$<n);return B}function N(f,l,L,A){for(var S=0;S<d;++S){var k=v(l,L,A);if(k===0)return l;var B=h(l,L,A)-f;l-=B/k}return l}function C(f){return f}return Oe=function(l,L,A,S){if(!(0<=l&&l<=1&&0<=A&&A<=1))throw new Error("bezier x values must be in [0, 1] range");if(l===L&&A===S)return C;for(var k=s?new Float32Array(r):new Array(r),B=0;B<r;++B)k[B]=h(B*o,l,A);function $(b){for(var y=0,M=1,E=r-1;M!==E&&k[M]<=b;++M)y+=o;--M;var R=(b-k[M])/(k[M+1]-k[M]),T=y+R*o,p=v(T,l,A);return p>=e?N(b,T,l,A):p===0?T:x(b,y,y+o,l,A)}return function(y){return y===0?0:y===1?1:h($(y),L,S)}},Oe}var St;function Bn(){if(St)return de.exports;St=1;var d=kn(),e={ease:d(.25,.1,.25,1),easeIn:d(.42,0,1,1),easeOut:d(0,0,.58,1),easeInOut:d(.42,0,.58,1),linear:d(0,0,1,1)};de.exports=t,de.exports.makeAggregateRaf=w,de.exports.sharedScheduler=w();function t(a,m,h){var v=Object.create(null),x=Object.create(null);h=h||{};var N=typeof h.easing=="function"?h.easing:e[h.easing];N||(h.easing&&console.warn("Unknown easing function in amator: "+h.easing),N=e.ease);var C=typeof h.step=="function"?h.step:n,f=typeof h.done=="function"?h.done:n,l=r(h.scheduler),L=Object.keys(m);L.forEach(function(M){v[M]=a[M],x[M]=m[M]-a[M]});var A=typeof h.duration=="number"?h.duration:400,S=Math.max(1,A*.06),k,B=0;return k=l.next(b),{cancel:$};function $(){l.cancel(k),k=0}function b(){var M=N(B/S);B+=1,y(M),B<=S?(k=l.next(b),C(a)):(k=0,setTimeout(function(){f(a)},0))}function y(M){L.forEach(function(E){a[E]=x[E]*M+v[E]})}}function n(){}function r(a){if(!a){var m=typeof window<"u"&&window.requestAnimationFrame;return m?o():s()}if(typeof a.next!="function")throw new Error("Scheduler is supposed to have next(cb) function");if(typeof a.cancel!="function")throw new Error("Scheduler is supposed to have cancel(handle) function");return a}function o(){return{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}}function s(){return{next:function(a){return setTimeout(a,1e3/60)},cancel:function(a){return clearTimeout(a)}}}function w(){var a=new Set,m=new Set,h=0;return{next:x,cancel:x,clearAll:v};function v(){a.clear(),m.clear(),cancelAnimationFrame(h),h=0}function x(f){m.add(f),N()}function N(){h||(h=requestAnimationFrame(C))}function C(){h=0;var f=m;m=a,a=f,a.forEach(function(l){l()}),a.clear()}}return de.exports}var ze,Ct;function $n(){if(Ct)return ze;Ct=1;function d(n){t(n);const r=e(n);return n.on=r.on,n.off=r.off,n.fire=r.fire,n}function e(n){let r=Object.create(null);return{on:function(o,s,w){if(typeof s!="function")throw new Error("callback is expected to be a function");let a=r[o];return a||(a=r[o]=[]),a.push({callback:s,ctx:w}),n},off:function(o,s){if(typeof o>"u")return r=Object.create(null),n;if(r[o])if(typeof s!="function")delete r[o];else{const w=r[o];for(let a=0;a<w.length;++a)w[a].callback===s&&w.splice(a,1)}return n},fire:function(o){const s=r[o];if(!s)return n;let w;arguments.length>1&&(w=Array.prototype.slice.call(arguments,1));for(let a=0;a<s.length;++a){const m=s[a];m.callback.apply(m.ctx,w)}return n}}}function t(n){if(!n)throw new Error("Eventify cannot use falsy object as events subject");const r=["on","fire","off"];for(let o=0;o<r.length;++o)if(n.hasOwnProperty(r[o]))throw new Error("Subject cannot be eventified, since it already has property '"+r[o]+"'")}return ze=d,ze}var Ie,Mt;function On(){if(Mt)return Ie;Mt=1,Ie=d;function d(n,r,o){typeof o!="object"&&(o={});var s=typeof o.minVelocity=="number"?o.minVelocity:5,w=typeof o.amplitude=="number"?o.amplitude:.25,a=typeof o.cancelAnimationFrame=="function"?o.cancelAnimationFrame:e(),m=typeof o.requestAnimationFrame=="function"?o.requestAnimationFrame:t(),h,v,x=342,N,C,f,l,L,A,S,k;return{start:$,stop:y,cancel:B};function B(){a(N),a(k)}function $(){h=n(),l=S=C=L=0,v=new Date,a(N),a(k),N=m(b)}function b(){var E=Date.now(),R=E-v;v=E;var T=n(),p=T.x-h.x,j=T.y-h.y;h=T;var Y=1e3/(1+R);C=.8*p*Y+.2*C,L=.8*j*Y+.2*L,N=m(b)}function y(){a(N),a(k);var E=n();f=E.x,A=E.y,v=Date.now(),(C<-s||C>s)&&(l=w*C,f+=l),(L<-s||L>s)&&(S=w*L,A+=S),k=m(M)}function M(){var E=Date.now()-v,R=!1,T=0,p=0;l&&(T=-l*Math.exp(-E/x),T>.5||T<-.5?R=!0:T=l=0),S&&(p=-S*Math.exp(-E/x),p>.5||p<-.5?R=!0:p=S=0),R&&(r(f+T,A+p),k=m(M))}}function e(){return typeof cancelAnimationFrame=="function"?cancelAnimationFrame:clearTimeout}function t(){return typeof requestAnimationFrame=="function"?requestAnimationFrame:function(n){return setTimeout(n,16)}}return Ie}var Pe,Et;function zn(){if(Et)return Pe;Et=1,Pe=d;function d(n){if(n)return{capture:t,release:t};var r,o,s,w=!1;return{capture:a,release:m};function a(h){w=!0,o=window.document.onselectstart,s=window.document.ondragstart,window.document.onselectstart=e,r=h,r.ondragstart=e}function m(){w&&(w=!1,window.document.onselectstart=o,r&&(r.ondragstart=s))}}function e(n){return n.stopPropagation(),!1}function t(){}return Pe}var Ze,Tt;function In(){if(Tt)return Ze;Tt=1,Ze=d;function d(){this.x=0,this.y=0,this.scale=1}return Ze}var xe={exports:{}},Nt;function Pn(){if(Nt)return xe.exports;Nt=1,xe.exports=d,xe.exports.canAttach=e;function d(t,n){if(!e(t))throw new Error("svg element is required for svg.panzoom to work");var r=t.ownerSVGElement;if(!r)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||r.setAttribute("tabindex",0);var o={getBBox:w,getScreenCTM:a,getOwner:s,applyTransform:h,initTransform:m};return o;function s(){return r}function w(){var v=t.getBBox();return{left:v.x,top:v.y,width:v.width,height:v.height}}function a(){var v=r.getCTM();return v||r.getScreenCTM()}function m(v){var x=t.getCTM();x===null&&(x=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()),v.x=x.e,v.y=x.f,v.scale=x.a,r.removeAttributeNS(null,"viewBox")}function h(v){t.setAttribute("transform","matrix("+v.scale+" 0 0 "+v.scale+" "+v.x+" "+v.y+")")}}function e(t){return t&&t.ownerSVGElement&&t.getCTM}return xe.exports}var be={exports:{}},At;function Zn(){if(At)return be.exports;At=1,be.exports=d,be.exports.canAttach=e;function d(t,n){var r=e(t);if(!r)throw new Error("panzoom requires DOM element to be attached to the DOM tree");var o=t.parentElement;t.scrollTop=0,n.disableKeyboardInteraction||o.setAttribute("tabindex",0);var s={getBBox:a,getOwner:w,applyTransform:m};return s;function w(){return o}function a(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}}function m(h){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+h.scale+", 0, 0, "+h.scale+", "+h.x+", "+h.y+")"}}function e(t){return t&&t.parentElement&&t.style}return be.exports}var qe,Rt;function qn(){if(Rt)return qe;Rt=1;var d=Rn(),e=Bn(),t=$n(),n=On(),r=zn(),o=r(),s=r(!0),w=In(),a=Pn(),m=Zn(),h=1,v=1.75,x=300,N=200;qe=C;function C(b,y){y=y||{};var M=y.controller;if(M||(a.canAttach(b)?M=a(b,y):m.canAttach(b)&&(M=m(b,y))),!M)throw new Error("Cannot create panzoom for the current type of dom element");var E=M.getOwner(),R={x:0,y:0},T=!1,p=new w;M.initTransform&&M.initTransform(p);var j=typeof y.filterKey=="function"?y.filterKey:L,Y=typeof y.pinchSpeed=="number"?y.pinchSpeed:1,_=y.bounds,P=typeof y.maxZoom=="number"?y.maxZoom:Number.POSITIVE_INFINITY,q=typeof y.minZoom=="number"?y.minZoom:0,D=typeof y.boundsPadding=="number"?y.boundsPadding:.05,V=typeof y.zoomDoubleClickSpeed=="number"?y.zoomDoubleClickSpeed:v,Le=y.beforeWheel||L,ne=y.beforeMouseDown||L,Se=typeof y.zoomSpeed=="number"?y.zoomSpeed:h,U=f(y.transformOrigin),Ce=y.enableTextSelection?s:o;A(_),y.autocenter&&Zt();var re,He=0,Ge=0,ie=0,je=null,_e=new Date,Me,oe=!1,ae=!1,F,H,Ee,Te,Ne,G;"smoothScroll"in y&&!y.smoothScroll?G=B():G=n(Wt,Jt,y.smoothScroll);var Ae,se,he,fe=!1;Je();var me={dispose:en,moveBy:J,moveTo:Re,smoothMoveTo:Qt,centerOn:Kt,zoomTo:we,zoomAbs:pe,smoothZoom:ge,smoothZoomAbs:cn,showRectangle:Pt,pause:Ot,resume:zt,isPaused:It,getTransform:qt,getMinZoom:Dt,setMinZoom:Vt,getMaxZoom:Ft,setMaxZoom:Ht,getTransformOrigin:Gt,setTransformOrigin:jt,getZoomSpeed:_t,setZoomSpeed:Ut};t(me);var Ue=typeof y.initialX=="number"?y.initialX:p.x,We=typeof y.initialY=="number"?y.initialY:p.y,Ye=typeof y.initialZoom=="number"?y.initialZoom:p.scale;return(Ue!=p.x||We!=p.y||Ye!=p.scale)&&pe(Ue,We,Ye),me;function Ot(){et(),fe=!0}function zt(){fe&&(Je(),fe=!1)}function It(){return fe}function Pt(i){var c=E.getBoundingClientRect(),u=X(c.width,c.height),g=i.right-i.left,O=i.bottom-i.top;if(!Number.isFinite(g)||!Number.isFinite(O))throw new Error("Invalid rectangle");var z=u.x/g,I=u.y/O,Z=Math.min(z,I);p.x=-(i.left+g/2)*Z+u.x/2,p.y=-(i.top+O/2)*Z+u.y/2,p.scale=Z}function X(i,c){if(M.getScreenCTM){var u=M.getScreenCTM(),g=u.a,O=u.d,z=u.e,I=u.f;R.x=i*g-z,R.y=c*O-I}else R.x=i,R.y=c;return R}function Zt(){var i,c,u=0,g=0,O=Ke();if(O)u=O.left,g=O.top,i=O.right-O.left,c=O.bottom-O.top;else{var z=E.getBoundingClientRect();i=z.width,c=z.height}var I=M.getBBox();if(!(I.width===0||I.height===0)){var Z=c/I.height,te=i/I.width,K=Math.min(te,Z);p.x=-(I.left+I.width/2)*K+i/2+u,p.y=-(I.top+I.height/2)*K+c/2+g,p.scale=K}}function qt(){return p}function Dt(){return q}function Vt(i){q=i}function Ft(){return P}function Ht(i){P=i}function Gt(){return U}function jt(i){U=f(i)}function _t(){return Se}function Ut(i){if(!Number.isFinite(i))throw new Error("Zoom speed should be a number");Se=i}function Wt(){return{x:p.x,y:p.y}}function Re(i,c){p.x=i,p.y=c,ke(),ee("pan"),Be()}function Xe(i,c){Re(p.x+i,p.y+c)}function ke(){var i=Ke();if(i){var c=!1,u=Yt(),g=i.left-u.right;return g>0&&(p.x+=g,c=!0),g=i.right-u.left,g<0&&(p.x+=g,c=!0),g=i.top-u.bottom,g>0&&(p.y+=g,c=!0),g=i.bottom-u.top,g<0&&(p.y+=g,c=!0),c}}function Ke(){if(_){if(typeof _=="boolean"){var i=E.getBoundingClientRect(),c=i.width,u=i.height;return{left:c*D,top:u*D,right:c*(1-D),bottom:u*(1-D)}}return _}}function Yt(){var i=M.getBBox(),c=Xt(i.left,i.top);return{left:c.x,top:c.y,right:i.width*p.scale+c.x,bottom:i.height*p.scale+c.y}}function Xt(i,c){return{x:i*p.scale+p.x,y:c*p.scale+p.y}}function Be(){T=!0,re=window.requestAnimationFrame(tn)}function Qe(i,c,u){if(k(i)||k(c)||k(u))throw new Error("zoom requires valid numbers");var g=p.scale*u;if(g<q){if(p.scale===q)return;u=q/p.scale}if(g>P){if(p.scale===P)return;u=P/p.scale}var O=X(i,c);if(p.x=O.x-u*(O.x-p.x),p.y=O.y-u*(O.y-p.y),_&&D===1&&q===1)p.scale*=u,ke();else{var z=ke();z||(p.scale*=u)}ee("zoom"),Be()}function pe(i,c,u){var g=u/p.scale;Qe(i,c,g)}function Kt(i){var c=i.ownerSVGElement;if(!c)throw new Error("ui element is required to be within the scene");var u=i.getBoundingClientRect(),g=u.left+u.width/2,O=u.top+u.height/2,z=c.getBoundingClientRect(),I=z.width/2-g,Z=z.height/2-O;J(I,Z,!0)}function Qt(i,c){J(i-p.x,c-p.y,!0)}function J(i,c,u){if(!u)return Xe(i,c);Ae&&Ae.cancel();var g={x:0,y:0},O={x:i,y:c},z=0,I=0;Ae=e(g,O,{step:function(Z){Xe(Z.x-z,Z.y-I),z=Z.x,I=Z.y}})}function Jt(i,c){ye(),Re(i,c)}function en(){et()}function Je(){E.addEventListener("mousedown",ct,{passive:!1}),E.addEventListener("dblclick",st,{passive:!1}),E.addEventListener("touchstart",nt,{passive:!1}),E.addEventListener("keydown",tt,{passive:!1}),d.addWheelListener(E,ft,{passive:!1}),Be()}function et(){d.removeWheelListener(E,ft),E.removeEventListener("mousedown",ct),E.removeEventListener("keydown",tt),E.removeEventListener("dblclick",st),E.removeEventListener("touchstart",nt),re&&(window.cancelAnimationFrame(re),re=0),G.cancel(),dt(),ht(),Ce.release(),$e()}function tn(){T&&nn()}function nn(){T=!1,M.applyTransform(p),ee("transform"),re=0}function tt(i){var c=0,u=0,g=0;if(i.keyCode===38?u=1:i.keyCode===40?u=-1:i.keyCode===37?c=1:i.keyCode===39?c=-1:i.keyCode===189||i.keyCode===109?g=1:(i.keyCode===187||i.keyCode===107)&&(g=-1),!j(i,c,u,g)){if(c||u){i.preventDefault(),i.stopPropagation();var O=E.getBoundingClientRect(),z=Math.min(O.width,O.height),I=.05,Z=z*I*c,te=z*I*u;J(Z,te)}if(g){var K=mt(g*100),z=U?le():rn();we(z.x,z.y,K)}}}function rn(){var i=E.getBoundingClientRect();return{x:i.width/2,y:i.height/2}}function nt(i){if(on(i),ce(),i.touches.length===1)return sn(i,i.touches[0]);i.touches.length===2&&(Ne=at(i.touches[0],i.touches[1]),he=!0,rt())}function on(i){y.onTouch&&!y.onTouch(i)||(i.stopPropagation(),i.preventDefault())}function an(i){ce(),!(y.onDoubleClick&&!y.onDoubleClick(i))&&(i.preventDefault(),i.stopPropagation())}function sn(i){Ge=new Date;var c=i.touches[0],u=W(c);Me=u;var g=X(u.x,u.y);F=g.x,H=g.y,Ee=F,Te=H,G.cancel(),rt()}function rt(){oe||(oe=!0,document.addEventListener("touchmove",it),document.addEventListener("touchend",ve),document.addEventListener("touchcancel",ve))}function it(i){if(i.touches.length===1){i.stopPropagation();var c=i.touches[0],u=W(c),g=X(u.x,u.y),O=g.x-F,z=g.y-H;O!==0&&z!==0&&pt(),F=g.x,H=g.y,J(O,z)}else if(i.touches.length===2){he=!0;var I=i.touches[0],Z=i.touches[1],te=at(I,Z),K=1+(te/Ne-1)*Y,vt=W(I),gt=W(Z);if(F=(vt.x+gt.x)/2,H=(vt.y+gt.y)/2,U){var u=le();F=u.x,H=u.y}we(F,H,K),Ne=te,i.stopPropagation(),i.preventDefault()}}function ce(){ie&&(clearTimeout(ie),ie=0)}function ot(i){if(y.onClick){ce();var c=F-Ee,u=H-Te,g=Math.sqrt(c*c+u*u);g>5||(ie=setTimeout(function(){ie=0,y.onClick(i)},x))}}function ve(i){if(ce(),i.touches.length>0){var c=W(i.touches[0]),u=X(c.x,c.y);F=u.x,H=u.y}else{var g=new Date;if(g-He<x)if(U){var c=le();ge(c.x,c.y,V)}else ge(Me.x,Me.y,V);else g-Ge<N&&ot(i);He=g,$e(),ht()}}function at(i,c){var u=i.clientX-c.clientX,g=i.clientY-c.clientY;return Math.sqrt(u*u+g*g)}function st(i){an(i);var c=W(i);U&&(c=le()),ge(c.x,c.y,V)}function ct(i){if(ce(),!ne(i)){if(je=i,_e=new Date,oe)return i.stopPropagation(),!1;var c=i.button===1&&window.event!==null||i.button===0;if(c){G.cancel();var u=W(i),g=X(u.x,u.y);return Ee=F=g.x,Te=H=g.y,document.addEventListener("mousemove",lt),document.addEventListener("mouseup",ut),Ce.capture(i.target||i.srcElement),!1}}}function lt(i){if(!oe){pt();var c=W(i),u=X(c.x,c.y),g=u.x-F,O=u.y-H;F=u.x,H=u.y,J(g,O)}}function ut(){var i=new Date;i-_e<N&&ot(je),Ce.release(),$e(),dt()}function dt(){document.removeEventListener("mousemove",lt),document.removeEventListener("mouseup",ut),ae=!1}function ht(){document.removeEventListener("touchmove",it),document.removeEventListener("touchend",ve),document.removeEventListener("touchcancel",ve),ae=!1,he=!1,oe=!1}function ft(i){if(!Le(i)){G.cancel();var c=i.deltaY;i.deltaMode>0&&(c*=100);var u=mt(c);if(u!==1){var g=U?le():W(i);we(g.x,g.y,u),i.preventDefault()}}}function W(i){var c,u,g=E.getBoundingClientRect();return c=i.clientX-g.left,u=i.clientY-g.top,{x:c,y:u}}function ge(i,c,u){var g=p.scale,O={scale:g},z={scale:u*g};G.cancel(),ye(),se=e(O,z,{step:function(I){pe(i,c,I.scale)},done:ln})}function cn(i,c,u){var g=p.scale,O={scale:g},z={scale:u};G.cancel(),ye(),se=e(O,z,{step:function(I){pe(i,c,I.scale)}})}function le(){var i=E.getBoundingClientRect();return{x:i.width*U.x,y:i.height*U.y}}function we(i,c,u){return G.cancel(),ye(),Qe(i,c,u)}function ye(){se&&(se.cancel(),se=null)}function mt(i){var c=Math.sign(i),u=Math.min(.25,Math.abs(Se*i/128));return 1-c*u}function pt(){ae||(ee("panstart"),ae=!0,G.start())}function $e(){ae&&(he||G.stop(),ee("panend"))}function ln(){ee("zoomend")}function ee(i){me.fire(i,me)}}function f(b){if(b){if(typeof b=="object")return(!S(b.x)||!S(b.y))&&l(b),b;l()}}function l(b){throw console.error(b),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join(`
`))}function L(){}function A(b){var y=typeof b;if(!(y==="undefined"||y==="boolean")){var M=S(b.left)&&S(b.top)&&S(b.bottom)&&S(b.right);if(!M)throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}}function S(b){return Number.isFinite(b)}function k(b){return Number.isNaN?Number.isNaN(b):b!==b}function B(){return{start:L,stop:L,cancel:L}}function $(){if(typeof document>"u")return;var b=document.getElementsByTagName("script");if(!b)return;for(var y,M=0;M<b.length;++M){var E=b[M];if(E.src&&E.src.match(/\bpanzoom(\.min)?\.js/)){y=E;break}}if(!y)return;var R=y.getAttribute("query");if(!R)return;var T=y.getAttribute("name")||"pz",p=Date.now();j();function j(){var P=document.querySelector(R);if(!P){var q=Date.now(),D=q-p;if(D<2e3){setTimeout(j,100);return}console.error("Cannot find the panzoom element",T);return}var V=Y(y);console.log(V),window[T]=C(P,V)}function Y(P){for(var q=P.attributes,D={},V=0;V<q.length;++V){var Le=q[V],ne=_(Le);ne&&(D[ne.name]=ne.value)}return D}function _(P){if(P.name){var q=P.name[0]==="p"&&P.name[1]==="z"&&P.name[2]==="-";if(q){var D=P.name.substr(3),V=JSON.parse(P.value);return{name:D,value:V}}}}}return $(),qe}var Dn=qn();const Vn=An(Dn);class Fn{pz;currentScale=1;currentX=0;currentY=0;constructor(e,t,n){this.pz=Vn(e,{maxZoom:3,minZoom:.2,bounds:!1,beforeMouseDown:o=>o.target.closest(".db-table")!==null});const r=o=>{const s=o.getTransform();this.currentScale=s.scale,this.currentX=s.x||0,this.currentY=s.y||0,t(this.currentScale),n&&n(this.currentScale,this.currentX,this.currentY)};this.pz.on("zoom",r),this.pz.on("pan",r),this.pz.on("transform",r),this.resetView()}getScale(){return this.currentScale}getTransform(){return{scale:this.currentScale,x:this.currentX,y:this.currentY}}setTransform(e,t,n){this.pz.zoomAbs(0,0,1),this.pz.moveTo(t,n),this.pz.zoomAbs(0,0,e),this.currentScale=e,this.currentX=t,this.currentY=n}zoomIn(){const e=window.innerWidth/2,t=window.innerHeight/2;this.pz.smoothZoom(e,t,1.25)}zoomOut(){const e=window.innerWidth/2,t=window.innerHeight/2;this.pz.smoothZoom(e,t,.8)}resetView(){const e=window.innerWidth/2,t=window.innerHeight/2;this.pz.moveTo(e,t),this.pz.zoomAbs(0,0,1),this.currentX=e,this.currentY=t,this.currentScale=1}dispose(){this.pz.dispose()}}class kt{el;container;constructor(e,t,n){this.container=e,this.el=document.createElement("div"),this.el.className="schema-hud";const r=document.createElement("div");r.className="hud-group";const o=this.createButton(Q.Grid,"Toggle Grid"),s=e.classList.contains("grid-visible");o.dataset.state=s?"on":"off",s&&o.classList.add("active"),o.onclick=()=>{const S=!(o.dataset.state==="on");o.dataset.state=S?"on":"off",o.classList.toggle("active",S),S?this.container.classList.add("grid-visible"):this.container.classList.remove("grid-visible"),this.dispatchProjectSettingsChange({showGrid:S})},r.appendChild(o);const w=document.createElement("div");w.className="hud-group";const a=[{value:"Curve",text:"Curve"},{value:"Rectilinear",text:"Rectilinear"},{value:"RoundRectilinear",text:"Round Rectilinear"},{value:"Oblique",text:"Oblique"},{value:"RoundOblique",text:"Round Oblique"}],m=document.createElement("div");m.className="custom-select";const h=document.createElement("div");h.className="select-trigger",h.title="Connection Line Style";const v=document.createElement("span");v.innerText="Curve",h.appendChild(v);const x=document.createElement("div");x.className="select-arrow",x.innerHTML=Q.ChevronUp,h.appendChild(x);const N=document.createElement("div");N.className="select-options",h.onclick=A=>{A.stopPropagation(),m.classList.toggle("open")},window.addEventListener("click",A=>{m.contains(A.target)||m.classList.remove("open")}),a.forEach(A=>{const S=document.createElement("div");S.className="select-option",S.innerText=A.text,S.onclick=()=>{v.innerText=A.text,m.querySelectorAll(".select-option").forEach(k=>k.classList.remove("selected")),S.classList.add("selected"),m.classList.remove("open"),n.setLineStyle(A.value),this.dispatchProjectSettingsChange({lineStyle:A.value})},A.value==="Curve"&&S.classList.add("selected"),N.appendChild(S)}),m.appendChild(h),m.appendChild(N),w.appendChild(m);const C=document.createElement("div");C.className="hud-group";const f=this.createButton(Q.ZoomIn,"Zoom In");f.onclick=()=>t.zoomIn();const l=this.createButton(Q.ZoomOut,"Zoom Out");l.onclick=()=>t.zoomOut();const L=this.createButton(Q.Center,"Reset View");L.onclick=()=>t.resetView(),C.append(l,L,f),this.el.append(r,w,C),e.appendChild(this.el)}createButton(e,t){const n=document.createElement("button");return n.className="hud-btn",n.innerHTML=e,n.title=t,n}dispatchProjectSettingsChange(e){const t=new CustomEvent("project-settings-changed",{detail:e});this.container.dispatchEvent(t)}}class Hn{container;wrapper;connectionManager;dragManager;panZoomManager;hud;parsers={dbml:new vn};constructor(e,t,n){this.container=document.getElementById(e),this.wrapper=document.createElement("div"),this.wrapper.className="schema-wrapper",this.container.appendChild(this.wrapper),this.connectionManager=new xt(this.wrapper),this.dragManager=new Nn(this.wrapper,this.connectionManager,t),this.panZoomManager=new Fn(this.wrapper,r=>{this.updateZoomState(r),this.dragManager.updateScale(r),this.connectionManager.updateScale(r)},(r,o,s)=>{this.updateZoomState(r,o,s),this.dragManager.updateScale(r),this.connectionManager.updateScale(r),n&&n(r,o,s)}),this.hud=new kt(this.container,this.panZoomManager,this.connectionManager)}updateZoomState(e,t,n){e<.5?this.wrapper.classList.add("semantic-zoom"):this.wrapper.classList.remove("semantic-zoom"),this.container.style.setProperty("--zoom",e.toString()),t!==void 0&&n!==void 0&&(this.container.style.setProperty("--pan-x",`${t}px`),this.container.style.setProperty("--pan-y",`${n}px`))}render(e,t){this.wrapper.innerHTML="",this.connectionManager=new xt(this.wrapper),this.dragManager.updateConnectionManager(this.connectionManager);const n=this.panZoomManager.getTransform();if(this.connectionManager.updateScale(n.scale),this.dragManager.updateScale(n.scale),this.updateZoomState(n.scale),this.container.querySelector(".schema-hud")?.remove(),this.hud=new kt(this.container,this.panZoomManager,this.connectionManager),this.container.style.setProperty("--zoom",n.scale.toString()),this.container.style.setProperty("--pan-x",`${n.x}px`),this.container.style.setProperty("--pan-y",`${n.y}px`),!!t.trim())try{let r=(e||"").toLowerCase().trim();r.startsWith(".")&&(r=r.slice(1));const o=this.parsers[r];if(!o)throw new Error(`Unsupported format: ${e}`);const{tables:s,relationships:w,projectSettings:a}=o.parse(t);if(a){if(a.zoom!==void 0||a.panX!==void 0){const C=a.zoom||1,f=a.panX||0,l=a.panY||0;this.panZoomManager.setTransform(C,f,l),this.container.style.setProperty("--zoom",C.toString()),this.container.style.setProperty("--pan-x",`${f}px`),this.container.style.setProperty("--pan-y",`${l}px`)}const x=a.showGrid==="true"||a.showGrid===!0;x?this.container.classList.add("grid-visible"):this.container.classList.remove("grid-visible");const N=this.container.querySelector('.hud-btn[title="Toggle Grid"]');if(N&&(N.dataset.state=x?"on":"off",x?N.classList.add("active"):N.classList.remove("active")),a.lineStyle){this.connectionManager.setLineStyle(a.lineStyle);const C=this.container.querySelector(".select-trigger"),f=this.container.querySelectorAll(".select-option");C&&f.length&&(C.textContent=a.lineStyle,f.forEach(l=>{l.textContent===a.lineStyle?l.classList.add("selected"):l.classList.remove("selected")}))}}const m=350,h=300,v=3;s.forEach((x,N)=>{const C=Mn.create(x);this.wrapper.appendChild(C);let f=x.x!==void 0?x.x:50+N%v*m,l=x.y!==void 0?x.y:50+Math.floor(N/v)*h;if(C.style.left=`${f}px`,C.style.top=`${l}px`,x.width&&(C.style.width=`${x.width}px`),x.color){const L=C.querySelector(".db-table-header");L&&(L.style.backgroundColor=x.color)}}),this.dragManager.setRelationships(w),setTimeout(()=>{this.connectionManager.draw(w)},0)}catch(r){console.error(r),this.wrapper.innerHTML=`<div class="error" style="padding:20px; color:red;">Error: ${r.message}</div>`}}}const Fe=new un(d=>{switch(d.type){case"UPDATE_CONTENT":Gn.render(d.format,d.content);break;case"UPDATE_THEME":_n(d.theme);break}}),Gn=new Hn("app",(d,e,t,n)=>{Fe.send({type:"UPDATE_TABLE_POS",tableName:d,x:e,y:t,width:n})}),jn=document.getElementById("app");jn.addEventListener("project-settings-changed",d=>{const e=d.detail||{};Fe.send({type:"UPDATE_PROJECT_SETTINGS",settings:{lineStyle:e.lineStyle,showGrid:e.showGrid}})});function _n(d){d==="dark"?document.body.classList.add("dark"):document.body.classList.remove("dark")}Fe.log("Webview Initialized & Ready");</script>
  <style rel="stylesheet" crossorigin>:root{--icon-pk: #d97706;--icon-fk: #2563eb;--icon-pk-fk: #16a34a;--icon-default: var(--text-secondary)}body.dark{--icon-pk: #fbbf24;--icon-fk: #60a5fa;--icon-pk-fk: #4ade80}.icon-container svg{width:100%;height:100%;display:block;fill:none;stroke:currentColor;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round}.icon-container.fill-mode svg{fill:currentColor;stroke:none}.key-icon{width:14px;height:14px;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px;color:var(--icon-default)}.key-icon svg{width:100%;height:100%;stroke:currentColor;fill:none}.key-icon.pk{color:var(--icon-pk)}.key-icon.fk{color:var(--icon-fk)}.key-icon.pk-fk{color:var(--icon-pk-fk)}.key-icon.empty{width:14px}.table-icon{width:16px;height:16px;display:flex;align-items:center;justify-content:center;opacity:.9;color:var(--header-text)}.table-icon svg{width:100%;height:100%;stroke:currentColor;fill:none}.hud-btn svg,.select-arrow svg{width:18px;height:18px;stroke:currentColor;fill:none}.select-arrow svg{width:12px;height:12px}.db-table{--table-main-color: var(--header-bg);top:0;left:0;min-width:200px;width:auto;background:var(--table-bg);border:1px solid var(--table-border);border-radius:8px;box-shadow:0 4px 6px #0000001a;z-index:1;display:flex;flex-direction:column;position:absolute}.db-table.dragging,.db-table.resizing{box-shadow:0 10px 15px #0003;z-index:100}.db-table.dragging{cursor:grabbing}.db-table.resizing{cursor:col-resize}.db-table-header{background:var(--header-bg);background-color:var(--table-main-color);color:var(--header-text);padding:10px;font-weight:700;border-top-left-radius:7px;border-top-right-radius:7px;cursor:grab;display:flex;align-items:flex-start;justify-content:space-between;flex-wrap:wrap;gap:8px}.db-table-header:active{cursor:grabbing}.header-title-wrapper{display:flex;align-items:center;gap:6px}.table-icon{width:16px;height:16px;display:flex;opacity:.9}.title{font-size:15px;line-height:1.2}.schema-banner{background:#fff3;padding:2px 6px;border-radius:4px;font-size:12px}.table-note{font-size:11px;color:#fffc;margin-top:4px;width:100%;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.resize-handle{position:absolute;top:0;right:0;width:12px;height:100%;cursor:col-resize;z-index:50;background:transparent;border-right:4px solid rgba(0,0,0,.1);transition:all .2s;border-top-right-radius:8px;border-bottom-right-radius:8px}.resize-handle:hover,.db-table.resizing .resize-handle{background-color:#3b82f61a;border-right:4px solid var(--header-bg)}.semantic-overlay{position:absolute;inset:-1px;background-color:var(--table-main-color);color:#fff;border-radius:8px;z-index:200;display:flex;justify-content:center;align-items:center;text-align:center;padding:10px;opacity:0;pointer-events:none;transition:opacity .25s ease-in-out}.overlay-text{font-weight:700;font-size:clamp(16px,calc(18px / var(--zoom)),64px);word-break:break-word;line-height:1.2;text-shadow:0 2px 4px rgba(0,0,0,.2)}.schema-wrapper.semantic-zoom .semantic-overlay{opacity:1;pointer-events:auto;cursor:grab}.schema-wrapper.semantic-zoom .db-table.dragging .semantic-overlay{cursor:grabbing}.db-row{display:flex;justify-content:space-between;padding:6px;border-bottom:1px solid var(--table-border);font-size:12px;line-height:1.2;position:relative;transition:background-color .15s ease}.db-row:hover{background-color:#7d7d7d0d}.db-row:last-child{border-bottom:none;border-bottom-left-radius:8px;border-bottom-right-radius:8px}.indexed-row{background:linear-gradient(to right,rgba(var(--header-rgb),.08),transparent)}.row-left{display:flex;align-items:flex-start;gap:8px;flex:1;min-width:0;padding-right:8px}.name-container{display:flex;flex-direction:column;overflow:hidden}.field-name{font-weight:600;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.field-note{font-size:11px;color:var(--text-secondary);margin-top:2px;line-height:1.2;font-style:italic;opacity:.8}.row-right{display:flex;align-items:flex-start;justify-content:flex-end;gap:6px;flex-shrink:0}.type-container{display:flex;flex-direction:column;align-items:flex-end}.field-type{color:var(--text-secondary);font-size:11px;font-family:SF Mono,Monaco,Menlo,Courier New,monospace;text-align:right;background:#9696961a;padding:1px 4px;#border-radius: 4px}.constrained-type{text-decoration-color:var(--header-bg);text-decoration-thickness:2px}.field-default{font-size:10px;color:var(--text-secondary);opacity:.7;text-align:right;margin-top:2px;max-width:100px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.badge{font-size:9px;height:12px;padding:0 6px;display:flex;align-items:center;justify-content:center;border-radius:10px;font-weight:700;letter-spacing:.5px;text-transform:uppercase;box-shadow:0 1px 2px #0000000d}.badge.unique{background:#f3e8ff;color:#7e22ce;border:1px solid rgba(126,34,206,.1)}.badge.not-null{background:#f3f4f6;color:#4b5563;border:1px solid rgba(75,85,99,.1)}.badge.enum{background:#ecfdf5;color:#047857;border:1px solid rgba(4,120,87,.1)}body.dark .db-row:hover{background-color:#ffffff0d}body.dark .field-type{background:#ffffff14;color:#a1a1aa}body.dark .badge.unique{background:#3b0764;color:#d8b4fe;border-color:#581c87}body.dark .badge.not-null{background:#374151;color:#e5e7eb;border-color:#4b5563}body.dark .badge.enum{background:#064e3b;color:#6ee7b7;border-color:#065f46}@keyframes flashHighlight{0%{box-shadow:inset 3px 0 0 var(--header-bg),0 0 #0000}50%{box-shadow:inset 3px 0 0 var(--header-bg),0 0 12px rgba(var(--header-rgb),.4)}to{box-shadow:inset 3px 0 0 var(--header-bg),0 0 #0000}}.db-row.highlighted{background-color:rgba(var(--header-rgb),.1);color:var(--text-primary);animation:flashHighlight 1.5s infinite;z-index:10}.db-table.highlighted{border-color:var(--header-bg);animation:flashTable 1.5s infinite;z-index:20}@keyframes flashTable{0%{box-shadow:0 4px 6px #0000001a}50%{box-shadow:0 0 15px rgba(var(--header-rgb),.6)}to{box-shadow:0 4px 6px #0000001a}}.connection-layer{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:0;overflow:visible}.connection-group{pointer-events:auto;cursor:pointer}.relation-hit-area{fill:none;stroke:transparent;stroke-width:20px}.relation-line-base{fill:none;stroke:var(--line-color);stroke-width:2px;stroke-linecap:round;transition:stroke .3s,stroke-width .3s}.relation-line-flow{fill:none;stroke:var(--header-bg);stroke-width:2px;stroke-linecap:round;stroke-dasharray:15 150;opacity:.4;animation:flowAnimation 5s linear infinite}@keyframes flowAnimation{to{stroke-dashoffset:165}}@keyframes continuousFlow{to{stroke-dashoffset:24}}.connection-group.highlighted .relation-line-base{stroke:var(--header-bg);stroke-width:3px;opacity:.5}.connection-group.highlighted .relation-line-flow{opacity:1;stroke-width:3px;stroke-dasharray:12 12;animation:continuousFlow .8s linear infinite;filter:drop-shadow(0 0 4px var(--header-bg))}.anchor-port{fill:var(--bg-color);stroke:var(--line-color);stroke-width:2px;transition:all .3s}.anchor-port.highlighted{stroke:var(--header-bg);fill:var(--header-bg);r:5px;filter:drop-shadow(0 0 3px var(--header-bg))}.label-bg{fill:var(--bg-color);stroke:var(--table-border);transition:all .3s}.connection-group.highlighted .label-bg{stroke:var(--header-bg);fill:#fff}.relation-label-text{font-size:10px;font-weight:700;fill:var(--text-secondary);text-anchor:middle;dominant-baseline:middle;pointer-events:none}.connection-group.highlighted .relation-label-text{fill:var(--header-bg)}.schema-hud{position:absolute;bottom:20px;left:20px;right:auto;background:var(--table-bg);border:1px solid var(--table-border);border-radius:8px;box-shadow:0 4px 12px #00000026;display:flex;flex-direction:row;align-items:center;padding:6px 12px;gap:12px;z-index:1000;-webkit-user-select:none;user-select:none}.hud-group{display:flex;gap:6px;align-items:center}.hud-group+.hud-group{border-top:none;margin-top:0;border-left:1px solid var(--table-border);padding-left:12px;margin-left:0}.hud-btn{background:transparent;border:1px solid transparent;border-radius:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;cursor:pointer;transition:all .12s;color:var(--text-primary)}.hud-btn:hover,.hud-btn.active{background:rgba(var(--header-rgb),.1);color:var(--header-bg)}.hud-btn:hover{color:var(--header-bg)}.custom-select{position:relative;font-size:12px;min-width:120px}.select-trigger{background:var(--bg-color);color:var(--text-primary);border:1px solid var(--table-border);border-radius:4px;padding:0 8px;cursor:pointer;white-space:nowrap;position:relative;height:28px;display:flex;align-items:center;gap:6px;min-width:100px;justify-content:space-between}.select-arrow{width:12px;height:12px;opacity:.6;display:flex;align-items:center;justify-content:center}.select-options{display:none;position:absolute;bottom:100%;left:0;margin-bottom:8px;background:var(--table-bg);border:1px solid var(--table-border);border-radius:6px;box-shadow:0 -4px 12px #00000026;width:100%;min-width:140px;overflow:hidden;z-index:1001;flex-direction:column}.custom-select.open .select-options{display:flex}.select-option{padding:8px 12px;cursor:pointer;color:var(--text-primary);transition:background .1s}.select-option:hover{background:rgba(var(--header-rgb),.1);color:var(--header-bg)}.select-option.selected{font-weight:700;background:rgba(var(--header-rgb),.05);color:var(--header-bg)}:root{--bg-color: #f4f4f4;--table-bg: #ffffff;--table-border: #d1d5db;--header-bg: #3b82f6;--header-rgb: 59, 130, 246;--header-text: #ffffff;--text-primary: #1f2937;--text-secondary: #6b7280;--line-color: #9ca3af;--grid-line: rgba(0, 0, 0, .04);--axis-line: rgba(0, 0, 0, .08)}body.dark{--bg-color: #1e1e1e;--table-bg: #2b2d30;--table-border: #4e5256;--header-bg: #3574f0;--header-rgb: 53, 116, 240;--header-text: #ffffff;--text-primary: #d1d5db;--text-secondary: #9ca3af;--line-color: #6b7280;--grid-line: rgba(255, 255, 255, .04);--axis-line: rgba(255, 255, 255, .08)}body{margin:0;background:var(--bg-color);color:var(--text-primary);font-family:sans-serif;overflow:hidden}#app{width:100vw;height:100vh;overflow:hidden;position:relative;--zoom: 1;--pan-x: 0px;--pan-y: 0px}#app.grid-visible{background-image:linear-gradient(to right,var(--axis-line) 2px,transparent 2px),linear-gradient(to bottom,var(--axis-line) 2px,transparent 2px),linear-gradient(to right,var(--grid-line) 1px,transparent 1px),linear-gradient(to bottom,var(--grid-line) 1px,transparent 1px);background-repeat:no-repeat,no-repeat,repeat,repeat;background-position:var(--pan-x) 0,0 var(--pan-y),var(--pan-x) var(--pan-y),var(--pan-x) var(--pan-y);background-size:2px 100%,100% 2px,calc(20px * var(--zoom)) calc(20px * var(--zoom)),calc(20px * var(--zoom)) calc(20px * var(--zoom))}.schema-wrapper{width:100%;height:100%;transform-origin:0 0;position:relative}</style>
</head>

<body>
<div id="app"></div>
</body>

</html>
